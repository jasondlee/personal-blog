<!DOCTYPE html>
<html>
<head>
    <title>Coming Up for Air : Writing CLIs with Spring Boot and JCommander</title>

    <script src="/assets/js/simple-jekyll-search.min.js" type="text/javascript"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3GQK1YDRQM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-3GQK1YDRQM');
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="me" href="https://mastodon.cloud/@jasondlee"/>

    <link rel="alternate" type="application/rss+xml" title="jasondl.ee RSS feed" href="/feed.xml">

    <link rel="stylesheet" href="/assets/css/main.css" />

    <!-- Web Fonts -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Cherry+Cream+Soda">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Philosopher">
    <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css"/>

    <link rel="stylesheet" href="https://unpkg.com/primeflex@3.1.2/primeflex.css"/>
    <link rel="stylesheet" href="https://unpkg.com/primeflex/themes/saga-blue.css"/>
    <link rel="author" href="/images/profile-pic.jpg"/>
</head>
<body>
<div class="grid">
    <div class="col blogname">
        <span>
            <a href="https://jasondl.ee">Coming Up for Air</a>
        </span>
    </div>
</div>
<div class="grid main">
    <div class="col-9">
        <div id="content">
            <article class="post">
    <h1 class="title" style="border-bottom: solid 1px #47586d; margin-bottom: 0.25rem;">
        Writing CLIs with Spring Boot and JCommander
    </h1>
    Wednesday, July 15, 2020 | <span class="share-page" style="">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://jasondl.ee/2020/writing-clis-with-spring-boot-and-jcommander&title=Writing CLIs with Spring Boot and JCommander" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <i class="fa fa-linkedin-square"></i>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=Writing CLIs with Spring Boot and JCommander&url=https://jasondl.ee/2020/writing-clis-with-spring-boot-and-jcommander&via=jasondlee&related=jasondlee" rel="nofollow" target="_blank" title="Share on Twitter">
      <i class="fa fa-twitter-square"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://jasondl.ee/2020/writing-clis-with-spring-boot-and-jcommander" rel="nofollow" target="_blank" title="Share on Facebook">
      <i class="fa fa-facebook-square"></i>
  </a>
  <a class="share-reddit" href="https://www.reddit.com/submit?url=https://jasondl.ee/2020/writing-clis-with-spring-boot-and-jcommander" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
      <i class="fa fa-reddit-square"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Writing CLIs with Spring Boot and JCommander&amp;body=Writing CLIs with Spring Boot and JCommander https://jasondl.ee/2020/writing-clis-with-spring-boot-and-jcommander" title="Share via Email" >
      <i class="fa fa-envelope"></i>
  </a>
</span>

    <div>
        <div class="paragraph">
<p>I was recently asked to convert a Spring Boot-based "CLI" to a real CLI utility. It was actually just a normal Spring Boot
application with REST endpoints that we&#8217;d hit with curl. Pretty ugly. After a few frustrating hours, I finally settled on a
solution that seems to work pretty well for us. It uses Spring Boot, of course, as that&#8217;s our library of choice, plus
<a href="https://jcommander.org/">JCommander</a> for the argument handling. This is a pared-down example of how the application is
structured. And because I care about of each you deeply, I&#8217;ll present it in Java AND Kotlin. :)</p>
</div>
<div class="paragraph">
<p>For those of you in a hurry, you can get the complete code in my <a href="https://github.com/jasondlee/spring-cli-demo">GitHub repo</a>.
Everyone else, feel free to read along.</p>
</div>
<div class="sect1">
<h2 id="setting-up-maven">Setting up Maven</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first step will be setting up your Maven POM (If you&#8217;re using Gradle, I&#8217;m sorry. I&#8217;m already doing two languages. You
can figure that part out on your own. :). We can start with this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="xml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre></td><td class="code"><pre><span style="color: #6e7781">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span style="color: #116329">&lt;project</span> <span style="color: #116329">xmlns=</span><span style="color: #0a3069">"http://maven.apache.org/POM/4.0.0"</span>
         <span style="color: #116329">xmlns:xsi=</span><span style="color: #0a3069">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span style="color: #116329">xsi:schemaLocation=</span><span style="color: #0a3069">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span style="color: #116329">&gt;</span>
    <span style="color: #116329">&lt;modelVersion&gt;</span>4.0.0<span style="color: #116329">&lt;/modelVersion&gt;</span>

    <span style="color: #116329">&lt;parent&gt;</span>
        <span style="color: #116329">&lt;groupId&gt;</span>org.springframework.boot<span style="color: #116329">&lt;/groupId&gt;</span>
        <span style="color: #116329">&lt;artifactId&gt;</span>spring-boot-starter-parent<span style="color: #116329">&lt;/artifactId&gt;</span>
        <span style="color: #116329">&lt;version&gt;</span>2.3.1.RELEASE<span style="color: #116329">&lt;/version&gt;</span>
    <span style="color: #116329">&lt;/parent&gt;</span>

    <span style="color: #116329">&lt;properties&gt;</span>
        <span style="color: #116329">&lt;maven.compiler.target&gt;</span>11<span style="color: #116329">&lt;/maven.compiler.target&gt;</span>
        <span style="color: #116329">&lt;maven.compiler.source&gt;</span>11<span style="color: #116329">&lt;/maven.compiler.source&gt;</span>
    <span style="color: #116329">&lt;/properties&gt;</span>

    <span style="color: #116329">&lt;groupId&gt;</span>com.steeplesoft.spring-cli-app<span style="color: #116329">&lt;/groupId&gt;</span>
    <span style="color: #116329">&lt;artifactId&gt;</span>spring-cli-app-master<span style="color: #116329">&lt;/artifactId&gt;</span>
    <span style="color: #116329">&lt;version&gt;</span>1.0-SNAPSHOT<span style="color: #116329">&lt;/version&gt;</span>
    <span style="color: #116329">&lt;packaging&gt;</span>pom<span style="color: #116329">&lt;/packaging&gt;</span>

    <span style="color: #116329">&lt;modules&gt;</span>
        <span style="color: #116329">&lt;module&gt;</span>spring-cli-app-java<span style="color: #116329">&lt;/module&gt;</span>
        <span style="color: #116329">&lt;module&gt;</span>spring-cli-app-kotlin<span style="color: #116329">&lt;/module&gt;</span>
    <span style="color: #116329">&lt;/modules&gt;</span>

    <span style="color: #116329">&lt;dependencies&gt;</span>
        <span style="color: #116329">&lt;dependency&gt;</span>
            <span style="color: #116329">&lt;groupId&gt;</span>com.beust<span style="color: #116329">&lt;/groupId&gt;</span>
            <span style="color: #116329">&lt;artifactId&gt;</span>jcommander<span style="color: #116329">&lt;/artifactId&gt;</span>
            <span style="color: #116329">&lt;version&gt;</span>1.78<span style="color: #116329">&lt;/version&gt;</span>
        <span style="color: #116329">&lt;/dependency&gt;</span>
        <span style="color: #116329">&lt;dependency&gt;</span>
            <span style="color: #116329">&lt;groupId&gt;</span>org.springframework.boot<span style="color: #116329">&lt;/groupId&gt;</span>
            <span style="color: #116329">&lt;artifactId&gt;</span>spring-boot-starter<span style="color: #116329">&lt;/artifactId&gt;</span>
        <span style="color: #116329">&lt;/dependency&gt;</span>
    <span style="color: #116329">&lt;/dependencies&gt;</span>
    <span style="color: #116329">&lt;build&gt;</span>
        <span style="color: #116329">&lt;plugins&gt;</span>
            <span style="color: #116329">&lt;plugin&gt;</span>
                <span style="color: #116329">&lt;groupId&gt;</span>org.springframework.boot<span style="color: #116329">&lt;/groupId&gt;</span>
                <span style="color: #116329">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span style="color: #116329">&lt;/artifactId&gt;</span>
            <span style="color: #116329">&lt;/plugin&gt;</span>
            <span style="color: #116329">&lt;plugin&gt;</span>
                <span style="color: #116329">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color: #116329">&lt;/groupId&gt;</span>
                <span style="color: #116329">&lt;artifactId&gt;</span>maven-compiler-plugin<span style="color: #116329">&lt;/artifactId&gt;</span>
                <span style="color: #116329">&lt;version&gt;</span>3.8.1<span style="color: #116329">&lt;/version&gt;</span>
            <span style="color: #116329">&lt;/plugin&gt;</span>
        <span style="color: #116329">&lt;/plugins&gt;</span>
    <span style="color: #116329">&lt;/build&gt;</span>
<span style="color: #116329">&lt;/project&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>While the project I was modifying had a lot of existing Spring beans, including some JPA entities and repositories, this
simple project does not, and I didn&#8217;t feel the added complexity helped any, so I went with simple. To bring in the Spring
dependencies, then, I declared a dependency on <code>org.springframework.boot:spring-boot-starter</code>. If you <em>are</em> using, say,
JPA, then feel free use <code>org.springframework.boot:spring-boot-starter-data-jpa</code> or whatever else may be appropriate.</p>
</div>
<div class="paragraph">
<p>Note also the declaration of a parent. It does a lot of work for you, so don&#8217;t skip it. :)</p>
</div>
<div class="paragraph">
<p>For Java, there&#8217;s no additional POM work required. In my multi-module setup, the POM is very basic and mostly just refers
to the POM above as its parent. The Kotlin POM is a bit more involved, but it&#8217;s just configuring the <code>kotlin-maven-plugin</code>.
If you need help with that, check out the <a href="https://kotlinlang.org/docs/reference/using-maven.html">official docs</a>.</p>
</div>
<div class="paragraph">
<p>With Maven configured, we&#8217;re ready to start writing our commands. Let&#8217;s start with writing the application&#8217;s entry point.
Spring Boot, while most people probably think of it solely as a REST microservice framework, does actually come with
built-in support for command line utilities via the <code>CommandLineRunner</code> interface. Our <code>@SpringBootApplication</code> starts
out looking like this:</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span style="color: #8250df">@SpringBootApplication</span>
<span style="color: #cf222e">public</span> <span style="color: #cf222e">class</span> <span style="color: #953800">SpringBootCliApplication</span> <span style="color: #cf222e">implements</span> <span style="color: #953800">CommandLineRunner</span> <span style="color: #0550ae">{</span>
    <span style="color: #8250df">@Override</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">run</span><span style="color: #0550ae">(</span><span style="color: #953800">String</span><span style="color: #0550ae">...</span> <span style="color: #24292f;background-color: #f6f8fa">args</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
    <span style="color: #0550ae">}</span>

    <span style="color: #cf222e">public</span> <span style="color: #cf222e">static</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">main</span><span style="color: #0550ae">(</span><span style="color: #953800">String</span><span style="color: #0550ae">[]</span> <span style="color: #24292f;background-color: #f6f8fa">args</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
        <span style="color: #953800">SpringApplication</span><span style="color: #0550ae">.</span><span style="color: #116329">run</span><span style="color: #0550ae">(</span><span style="color: #953800">SpringBootCliApplication</span><span style="color: #0550ae">.</span><span style="color: #116329">class</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">args</span><span style="color: #0550ae">);</span>
    <span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Kotlin</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span style="color: #8250df">@SpringBootApplication</span>
<span style="color: #cf222e">class</span> <span style="color: #8250df">SpringBootCliApplication</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">val</span> <span style="color: #0550ae">commands:</span> <span style="color: #953800">List</span><span style="color: #0550ae">&lt;</span><span style="color: #953800">Command</span><span style="color: #0550ae">&gt;)</span> <span style="color: #0550ae">:</span> <span style="color: #953800">CommandLineRunner</span> <span style="color: #0550ae">{</span>
    <span style="color: #24292f;background-color: #f6f8fa">override</span> <span style="color: #24292f;background-color: #f6f8fa">fun</span> <span style="color: #8250df">run</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">vararg</span> <span style="color: #0550ae">args:</span> <span style="color: #953800">String</span><span style="color: #0550ae">?)</span> <span style="color: #0550ae">{</span>
    <span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>

<span style="color: #24292f;background-color: #f6f8fa">fun</span> <span style="color: #8250df">main</span><span style="color: #0550ae">(</span><span style="color: #0550ae">args:</span> <span style="color: #953800">Array</span><span style="color: #0550ae">&lt;</span><span style="color: #953800">String</span><span style="color: #0550ae">&gt;)</span> <span style="color: #0550ae">{</span>
    <span style="color: #24292f;background-color: #f6f8fa">runApplication</span><span style="color: #0550ae">&lt;</span><span style="color: #953800">SpringBootCliApplication</span><span style="color: #0550ae">&gt;(*</span><span style="color: #24292f;background-color: #f6f8fa">args</span><span style="color: #0550ae">)</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can compile and run that now, but it&#8217;s going to be awfully boring.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-commands">Adding commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When we start defining commands, which we&#8217;re going  to do right now, we&#8217;re immediately hit with two concerns:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>How do we define them? and</p>
</li>
<li>
<p>How do we find them?</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="defining-commands">Defining Commands</h3>
<div class="paragraph">
<p>JCommander lets us define commands using simple classes, so we&#8217;ll create a very simple command, <code>ExampleCommand</code>, that
takes one parameter:</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span style="color: #8250df">@Parameters</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">commandNames</span> <span style="color: #0550ae">=</span> <span style="color: #953800">ExampleCommand</span><span style="color: #0550ae">.</span><span style="color: #116329">COMMAND_NAME</span><span style="color: #0550ae">,</span>
        <span style="color: #24292f;background-color: #f6f8fa">commandDescription</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"Example command"</span><span style="color: #0550ae">)</span>
<span style="color: #cf222e">public</span> <span style="color: #cf222e">class</span> <span style="color: #953800">ExampleCommand</span> <span style="color: #cf222e">implements</span> <span style="color: #953800">Command</span> <span style="color: #0550ae">{</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">static</span> <span style="color: #cf222e">final</span> <span style="color: #953800">String</span> <span style="color: #953800">COMMAND_NAME</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"example"</span><span style="color: #0550ae">;</span>

    <span style="color: #8250df">@Parameter</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">names</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"--example"</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">description</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"Example parameter"</span><span style="color: #0550ae">)</span>
    <span style="color: #cf222e">private</span> <span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">example</span><span style="color: #0550ae">;</span>

    <span style="color: #8250df">@Override</span>
    <span style="color: #cf222e">public</span> <span style="color: #953800">String</span> <span style="color: #8250df">commandName</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
        <span style="color: #cf222e">return</span> <span style="color: #953800">COMMAND_NAME</span><span style="color: #0550ae">;</span>
    <span style="color: #0550ae">}</span>

    <span style="color: #8250df">@Override</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">run</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
        <span style="color: #953800">System</span><span style="color: #0550ae">.</span><span style="color: #116329">out</span><span style="color: #0550ae">.</span><span style="color: #116329">println</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"You ran the command "</span> <span style="color: #0550ae">+</span> <span style="color: #953800">COMMAND_NAME</span> <span style="color: #0550ae">+</span> <span style="color: #0a3069">" with the parameter --example set to "</span> <span style="color: #0550ae">+</span> <span style="color: #24292f;background-color: #f6f8fa">example</span><span style="color: #0550ae">);</span>
    <span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Kotlin</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span style="color: #8250df">@Parameters</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">commandNames</span> <span style="color: #0550ae">=</span> <span style="color: #0550ae">[</span><span style="color: #953800">ExampleCommand</span><span style="color: #0550ae">.</span><span style="color: #116329">COMMAND_NAME</span><span style="color: #0550ae">],</span> <span style="color: #24292f;background-color: #f6f8fa">commandDescription</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"Example command"</span><span style="color: #0550ae">)</span>
<span style="color: #cf222e">class</span> <span style="color: #953800">ExampleCommand</span> <span style="color: #0550ae">:</span> <span style="color: #953800">Command</span> <span style="color: #0550ae">{</span>
    <span style="color: #8250df">@Parameter</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">names</span> <span style="color: #0550ae">=</span> <span style="color: #0550ae">[</span><span style="color: #0a3069">"--example"</span><span style="color: #0550ae">],</span> <span style="color: #24292f;background-color: #f6f8fa">description</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"Example parameter"</span><span style="color: #0550ae">)</span>
    <span style="color: #cf222e">private</span> <span style="color: #cf222e">var</span> <span style="color: #0550ae">example:</span> <span style="color: #953800">String</span><span style="color: #0550ae">?</span> <span style="color: #0550ae">=</span> <span style="color: #0550ae">null</span>

    <span style="color: #24292f;background-color: #f6f8fa">override</span> <span style="color: #24292f;background-color: #f6f8fa">fun</span> <span style="color: #8250df">commandName</span><span style="color: #0550ae">():</span> <span style="color: #953800">String</span> <span style="color: #0550ae">{</span>
        <span style="color: #cf222e">return</span> <span style="color: #953800">COMMAND_NAME</span>
    <span style="color: #0550ae">}</span>

    <span style="color: #24292f;background-color: #f6f8fa">override</span> <span style="color: #24292f;background-color: #f6f8fa">fun</span> <span style="color: #8250df">run</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
        <span style="color: #24292f;background-color: #f6f8fa">println</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"You ran the command $COMMAND_NAME with the parameter --example set to $example"</span><span style="color: #0550ae">)</span>
    <span style="color: #0550ae">}</span>

    <span style="color: #24292f;background-color: #f6f8fa">companion</span> <span style="color: #24292f;background-color: #f6f8fa">object</span> <span style="color: #0550ae">{</span>
        <span style="color: #cf222e">const</span> <span style="color: #24292f;background-color: #f6f8fa">val</span> <span style="color: #953800">COMMAND_NAME</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"example"</span>
    <span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll see a bit of extra ceremony in this (the <code>public static final String</code>) than is strictly necessary, but you will
see why in a moment. The first thing of important to note is the <code>@Parameters</code> annotation on the class. I&#8217;m not a JCommander
expert, but I get the sense that the reason we&#8217;re using that annotation rather than, say, the not-real <code>@Command</code> annotation
is that we&#8217;re technically building <em>one</em> "command", and just defining here a sub-command, or a parameter, if you will, that
refines what actions an invocation will perform. Total guess there, but that&#8217;s certainly the annotation
<a href="https://jcommander.org/#_more_complex_syntaxes_commands">you need</a>.</p>
</div>
<div class="paragraph">
<p>At any rate, inside the class, we define an actual parameter we want to support, <code>--example</code>. It&#8217;s an optional <code>String</code>.
You can define as many options as you want, and JCommander has very robust support for just about anything you would want
to do, <a href="https://jcommander.org/#_types_of_options">it seems</a>.</p>
</div>
<div class="paragraph">
<p>Finally, we have a <code>run</code> method (or function for all you Kotlin folks!) that does the real work. That&#8217;s not a JCommander
requirement, but is something I built into the solution I&#8217;m showing here. Before we take a look at that, let&#8217;s find out
how to find the commands. We do that by leaning on Spring.</p>
</div>
</div>
<div class="sect2">
<h3 id="finding-commands">Finding Commands</h3>
<div class="paragraph">
<p>Since we&#8217;re suing Spring, we&#8217;re going to let Spring do as much of the work as we can. This is especially helpful if you&#8217;re
injecting repositories or other Spring beans. The integration is very natural: we simply annotate the class with
<code>@Component</code>:</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span style="color: #8250df">@Component</span>
<span style="color: #8250df">@Parameters</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">commandNames</span> <span style="color: #0550ae">=</span> <span style="color: #953800">ExampleCommand</span><span style="color: #0550ae">.</span><span style="color: #116329">COMMAND_NAME</span><span style="color: #0550ae">,</span>
        <span style="color: #24292f;background-color: #f6f8fa">commandDescription</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"Example command"</span><span style="color: #0550ae">)</span>
<span style="color: #cf222e">public</span> <span style="color: #cf222e">class</span> <span style="color: #953800">ExampleCommand</span> <span style="color: #0550ae">{</span>
    <span style="color: #6e7781">// ...</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Kotlin</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span style="color: #8250df">@Component</span>
<span style="color: #8250df">@Parameters</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">commandNames</span> <span style="color: #0550ae">=</span> <span style="color: #0550ae">[</span><span style="color: #953800">ExampleCommand</span><span style="color: #0550ae">.</span><span style="color: #116329">COMMAND_NAME</span><span style="color: #0550ae">],</span> <span style="color: #24292f;background-color: #f6f8fa">commandDescription</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"Example command"</span><span style="color: #0550ae">)</span>
<span style="color: #cf222e">class</span> <span style="color: #953800">ExampleCommand</span> <span style="color: #0550ae">:</span> <span style="color: #953800">Command</span> <span style="color: #0550ae">{</span>
    <span style="color: #6e7781">// ...</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the Spring <code>ApplicationContext</code> starts up, our command is found and registered in Spring&#8217;s metadata. All we have to
do now is ask for it:</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span style="color: #8250df">@SpringBootApplication</span>
<span style="color: #cf222e">public</span> <span style="color: #cf222e">class</span> <span style="color: #953800">SpringBootCliApplication</span> <span style="color: #cf222e">implements</span> <span style="color: #953800">CommandLineRunner</span> <span style="color: #0550ae">{</span>
    <span style="color: #8250df">@Autowired</span>
    <span style="color: #cf222e">private</span> <span style="color: #953800">List</span><span style="color: #0550ae">&lt;</span><span style="color: #953800">Command</span><span style="color: #0550ae">&gt;</span> <span style="color: #24292f;background-color: #f6f8fa">commands</span><span style="color: #0550ae">;</span>

    <span style="color: #8250df">@Override</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">run</span><span style="color: #0550ae">(</span><span style="color: #953800">String</span><span style="color: #0550ae">...</span> <span style="color: #24292f;background-color: #f6f8fa">args</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
        <span style="color: #6e7781">// ...</span>
    <span style="color: #0550ae">}</span>
    <span style="color: #6e7781">// ...</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Kotlin</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span style="color: #8250df">@SpringBootApplication</span>
<span style="color: #cf222e">class</span> <span style="color: #8250df">SpringBootCliApplication</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">val</span> <span style="color: #0550ae">commands:</span> <span style="color: #953800">List</span><span style="color: #0550ae">&lt;</span><span style="color: #953800">Command</span><span style="color: #0550ae">&gt;)</span> <span style="color: #0550ae">:</span> <span style="color: #953800">CommandLineRunner</span> <span style="color: #0550ae">{</span>
    <span style="color: #24292f;background-color: #f6f8fa">override</span> <span style="color: #24292f;background-color: #f6f8fa">fun</span> <span style="color: #8250df">run</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">vararg</span> <span style="color: #0550ae">args:</span> <span style="color: #953800">String</span><span style="color: #0550ae">?)</span> <span style="color: #0550ae">{</span>
        <span style="color: #6e7781">// ...</span>
    <span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>When our <code>Application</code> starts, Spring injects a list of any <code>Command</code> objects it finds. But what is that?</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span style="color: #cf222e">public</span> <span style="color: #cf222e">interface</span> <span style="color: #953800">Command</span> <span style="color: #0550ae">{</span>
    <span style="color: #953800">String</span> <span style="color: #8250df">commandName</span><span style="color: #0550ae">();</span>
    <span style="color: #cf222e">void</span> <span style="color: #8250df">run</span><span style="color: #0550ae">();</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Kotlin</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span style="color: #cf222e">interface</span> <span style="color: #953800">Command</span> <span style="color: #0550ae">{</span>
    <span style="color: #24292f;background-color: #f6f8fa">fun</span> <span style="color: #8250df">commandName</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">:</span> <span style="color: #953800">String</span>
    <span style="color: #24292f;background-color: #f6f8fa">fun</span> <span style="color: #8250df">run</span><span style="color: #0550ae">()</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s a very simple <code>interface</code> that provides a way to find out <em>what</em> it represents, and then to do the work. Armed with
that, we can now build our JCommander objects:</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre>    <span style="color: #8250df">@Override</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">run</span><span style="color: #0550ae">(</span><span style="color: #953800">String</span><span style="color: #0550ae">...</span> <span style="color: #24292f;background-color: #f6f8fa">args</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
        <span style="color: #953800">JCommander</span><span style="color: #0550ae">.</span><span style="color: #116329">Builder</span> <span style="color: #24292f;background-color: #f6f8fa">builder</span> <span style="color: #0550ae">=</span> <span style="color: #953800">JCommander</span><span style="color: #0550ae">.</span><span style="color: #116329">newBuilder</span><span style="color: #0550ae">()</span> <span style="color: #6e7781">// 1</span>
                <span style="color: #0550ae">.</span><span style="color: #116329">programName</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"spring-boot-cli"</span><span style="color: #0550ae">);</span>
        <span style="color: #24292f;background-color: #f6f8fa">commands</span><span style="color: #0550ae">.</span><span style="color: #116329">forEach</span><span style="color: #0550ae">((</span><span style="color: #24292f;background-color: #f6f8fa">c</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">-&gt;</span> <span style="color: #24292f;background-color: #f6f8fa">builder</span><span style="color: #0550ae">.</span><span style="color: #116329">addCommand</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">c</span><span style="color: #0550ae">));</span>      <span style="color: #6e7781">// 2</span>
        <span style="color: #953800">JCommander</span> <span style="color: #24292f;background-color: #f6f8fa">jc</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">builder</span><span style="color: #0550ae">.</span><span style="color: #116329">build</span><span style="color: #0550ae">();</span>
        <span style="color: #24292f;background-color: #f6f8fa">jc</span><span style="color: #0550ae">.</span><span style="color: #116329">parse</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">args</span><span style="color: #0550ae">);</span>                                      <span style="color: #6e7781">// 3</span>

        <span style="color: #953800">Optional</span><span style="color: #0550ae">&lt;</span><span style="color: #953800">Command</span><span style="color: #0550ae">&gt;</span> <span style="color: #24292f;background-color: #f6f8fa">command</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">commands</span><span style="color: #0550ae">.</span><span style="color: #116329">stream</span><span style="color: #0550ae">()</span>        <span style="color: #6e7781">// 4</span>
                <span style="color: #0550ae">.</span><span style="color: #116329">filter</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">c</span> <span style="color: #0550ae">-&gt;</span> <span style="color: #24292f;background-color: #f6f8fa">c</span><span style="color: #0550ae">.</span><span style="color: #116329">commandName</span><span style="color: #0550ae">().</span><span style="color: #116329">equals</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">jc</span><span style="color: #0550ae">.</span><span style="color: #116329">getParsedCommand</span><span style="color: #0550ae">()))</span>
                <span style="color: #0550ae">.</span><span style="color: #116329">findFirst</span><span style="color: #0550ae">();</span>

        <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">command</span><span style="color: #0550ae">.</span><span style="color: #116329">isPresent</span><span style="color: #0550ae">())</span> <span style="color: #0550ae">{</span>                           <span style="color: #6e7781">// 5</span>
            <span style="color: #24292f;background-color: #f6f8fa">command</span><span style="color: #0550ae">.</span><span style="color: #116329">get</span><span style="color: #0550ae">().</span><span style="color: #116329">run</span><span style="color: #0550ae">();</span>
        <span style="color: #0550ae">}</span> <span style="color: #cf222e">else</span> <span style="color: #0550ae">{</span>
            <span style="color: #24292f;background-color: #f6f8fa">jc</span><span style="color: #0550ae">.</span><span style="color: #116329">usage</span><span style="color: #0550ae">();</span>                                      <span style="color: #6e7781">// 6</span>
        <span style="color: #0550ae">}</span>
    <span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Kotlin</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre>    <span style="color: #24292f;background-color: #f6f8fa">override</span> <span style="color: #24292f;background-color: #f6f8fa">fun</span> <span style="color: #8250df">run</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">vararg</span> <span style="color: #0550ae">args:</span> <span style="color: #953800">String</span><span style="color: #0550ae">?)</span> <span style="color: #0550ae">{</span>
        <span style="color: #24292f;background-color: #f6f8fa">val</span> <span style="color: #24292f;background-color: #f6f8fa">builder</span> <span style="color: #0550ae">=</span> <span style="color: #953800">JCommander</span><span style="color: #0550ae">.</span><span style="color: #116329">newBuilder</span><span style="color: #0550ae">()</span>                <span style="color: #6e7781">// 1</span>
                <span style="color: #0550ae">.</span><span style="color: #116329">programName</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"spring-boot-cli"</span><span style="color: #0550ae">)</span>
        <span style="color: #24292f;background-color: #f6f8fa">commands</span><span style="color: #0550ae">.</span><span style="color: #116329">forEach</span> <span style="color: #0550ae">{</span>                                   <span style="color: #6e7781">// 2</span>
            <span style="color: #24292f;background-color: #f6f8fa">builder</span><span style="color: #0550ae">.</span><span style="color: #116329">addCommand</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">it</span><span style="color: #0550ae">.</span><span style="color: #116329">commandName</span><span style="color: #0550ae">(),</span> <span style="color: #24292f;background-color: #f6f8fa">it</span><span style="color: #0550ae">)</span>
        <span style="color: #0550ae">}</span>
        <span style="color: #24292f;background-color: #f6f8fa">val</span> <span style="color: #24292f;background-color: #f6f8fa">jc</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">builder</span><span style="color: #0550ae">.</span><span style="color: #116329">build</span><span style="color: #0550ae">();</span>

        <span style="color: #24292f;background-color: #f6f8fa">jc</span><span style="color: #0550ae">.</span><span style="color: #116329">parse</span><span style="color: #0550ae">(*</span><span style="color: #24292f;background-color: #f6f8fa">args</span><span style="color: #0550ae">)</span>                                      <span style="color: #6e7781">// 3</span>

        <span style="color: #24292f;background-color: #f6f8fa">val</span> <span style="color: #24292f;background-color: #f6f8fa">command</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">commands</span>                               <span style="color: #6e7781">// 4</span>
            <span style="color: #0550ae">.</span><span style="color: #116329">firstOrNull</span> <span style="color: #0550ae">{</span> <span style="color: #24292f;background-color: #f6f8fa">it</span><span style="color: #0550ae">.</span><span style="color: #116329">commandName</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">==</span> <span style="color: #24292f;background-color: #f6f8fa">jc</span><span style="color: #0550ae">.</span><span style="color: #116329">parsedCommand</span> <span style="color: #0550ae">}</span>
        <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">command</span> <span style="color: #0550ae">!=</span> <span style="color: #0550ae">null</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>                               <span style="color: #6e7781">// 5</span>
            <span style="color: #24292f;background-color: #f6f8fa">command</span><span style="color: #0550ae">.</span><span style="color: #116329">run</span><span style="color: #0550ae">()</span>
        <span style="color: #0550ae">}</span> <span style="color: #cf222e">else</span> <span style="color: #0550ae">{</span>
            <span style="color: #24292f;background-color: #f6f8fa">jc</span><span style="color: #0550ae">.</span><span style="color: #116329">usage</span><span style="color: #0550ae">()</span>                                       <span style="color: #6e7781">// 6</span>
        <span style="color: #0550ae">}</span>
    <span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This isn&#8217;t terribly complex, but let&#8217;s step through it:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We create a <code>JCommander.Builder</code> instance, and start by giving our command a name, <code>spring-boot-cli</code>.</p>
</li>
<li>
<p>We iterate through the injected list of <code>Command</code> instances, calling <code>builder.addCommand()</code> to register it with JCommander.</p>
</li>
<li>
<p>Once we&#8217;ve finished configuring and building our JCommander instance, we need to parse the command line arguments</p>
</li>
<li>
<p>Now we need to find the command the user requested. We do that by iterating over our list of commands again, comparing
<code>Command.commandName()</code> with the value returned by <code>jc.getParsedCommand()</code>. We&#8217;ll either get a <code>Command</code> instance, or an
empty <code>Optional</code></p>
</li>
<li>
<p>If we have found a <code>Command</code>, we call its <code>run</code> method/function. JCommander takes care of injecting the command line
options/parameters that have been defined, so by the time control enters <code>run()</code>, we&#8217;re ready to do our work.</p>
</li>
<li>
<p>On the other hand, if no <code>Command</code> is found, we ask JCommander to print a usage message, which it generates for us using
the <code>@Parameter</code> and <code>@Parameters</code> annotations.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-commands">Running the commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We should be ready to build and run these now:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span style="color: #0550ae">$ </span>mvn <span style="color: #953800">install</span>
...
<span style="color: #0550ae">$ </span>java <span style="color: #116329">-jar</span> spring-cli-app-java/target/spring-cli-app-java-1.0-SNAPSHOT.jar
Usage: spring-boot-cli <span style="color: #0550ae">[</span><span style="color: #953800">command</span><span style="color: #0550ae">]</span> <span style="color: #0550ae">[</span><span style="color: #953800">command </span>options]
  Commands:
    example      Example <span style="color: #953800">command
      </span>Usage: example <span style="color: #0550ae">[</span>options]
        Options:
          <span style="color: #116329">--example</span>
            Example parameter
<span style="color: #0550ae">$ </span>java <span style="color: #116329">-jar</span> spring-cli-app-kotlin/target/spring-cli-app-kotlin-1.0-SNAPSHOT.jar
Usage: spring-boot-cli <span style="color: #0550ae">[</span><span style="color: #953800">command</span><span style="color: #0550ae">]</span> <span style="color: #0550ae">[</span><span style="color: #953800">command </span>options]
  Commands:
    example      Example <span style="color: #953800">command
      </span>Usage: example <span style="color: #0550ae">[</span>options]
        Options:
          <span style="color: #116329">--example</span>
            Example parameter
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>They look remarkable similar, don&#8217;t they? :)</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example with setting a parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span style="color: #0550ae">$ </span>java <span style="color: #116329">-jar</span> spring-cli-app-kotlin/target/spring-cli-app-kotlin-1.0-SNAPSHOT.jar example <span style="color: #116329">--example</span> <span style="color: #0a3069">'This is a Spring Boot cli!'</span>
You ran the <span style="color: #953800">command </span>example with the parameter <span style="color: #116329">--example</span> <span style="color: #953800">set </span>to This is a Spring Boot cli!
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-more-commands">Adding more commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remember how I kinda made a big deal about finding commands and injecting lists? With this setup, it&#8217;s super easy. Barely
an inconvience:</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span style="color: #8250df">@Component</span>
<span style="color: #8250df">@Parameters</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">commandNames</span> <span style="color: #0550ae">=</span> <span style="color: #953800">Example2Command</span><span style="color: #0550ae">.</span><span style="color: #116329">COMMAND_NAME</span><span style="color: #0550ae">,</span>
        <span style="color: #24292f;background-color: #f6f8fa">commandDescription</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"Example command #2"</span><span style="color: #0550ae">)</span>
<span style="color: #cf222e">public</span> <span style="color: #cf222e">class</span> <span style="color: #953800">Example2Command</span> <span style="color: #cf222e">implements</span> <span style="color: #953800">Command</span> <span style="color: #0550ae">{</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">static</span> <span style="color: #cf222e">final</span> <span style="color: #953800">String</span> <span style="color: #953800">COMMAND_NAME</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"something-else"</span><span style="color: #0550ae">;</span>

    <span style="color: #8250df">@Override</span>
    <span style="color: #cf222e">public</span> <span style="color: #953800">String</span> <span style="color: #8250df">commandName</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
        <span style="color: #cf222e">return</span> <span style="color: #953800">COMMAND_NAME</span><span style="color: #0550ae">;</span>
    <span style="color: #0550ae">}</span>

    <span style="color: #8250df">@Override</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">run</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
        <span style="color: #953800">System</span><span style="color: #0550ae">.</span><span style="color: #116329">out</span><span style="color: #0550ae">.</span><span style="color: #116329">println</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"You ran something else!"</span><span style="color: #0550ae">);</span>
    <span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Kotlin</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span style="color: #8250df">@Component</span>
<span style="color: #8250df">@Parameters</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">commandNames</span> <span style="color: #0550ae">=</span> <span style="color: #0550ae">[</span><span style="color: #953800">Example2Command</span><span style="color: #0550ae">.</span><span style="color: #116329">COMMAND_NAME</span><span style="color: #0550ae">],</span> <span style="color: #24292f;background-color: #f6f8fa">commandDescription</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"Example command #2"</span><span style="color: #0550ae">)</span>
<span style="color: #cf222e">class</span> <span style="color: #953800">Example2Command</span> <span style="color: #0550ae">:</span> <span style="color: #953800">Command</span> <span style="color: #0550ae">{</span>
    <span style="color: #24292f;background-color: #f6f8fa">override</span> <span style="color: #24292f;background-color: #f6f8fa">fun</span> <span style="color: #8250df">commandName</span><span style="color: #0550ae">():</span> <span style="color: #953800">String</span> <span style="color: #0550ae">{</span>
        <span style="color: #cf222e">return</span> <span style="color: #953800">COMMAND_NAME</span>
    <span style="color: #0550ae">}</span>

    <span style="color: #24292f;background-color: #f6f8fa">override</span> <span style="color: #24292f;background-color: #f6f8fa">fun</span> <span style="color: #8250df">run</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
        <span style="color: #24292f;background-color: #f6f8fa">println</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"You ran something else!"</span><span style="color: #0550ae">)</span>
    <span style="color: #0550ae">}</span>

    <span style="color: #24292f;background-color: #f6f8fa">companion</span> <span style="color: #24292f;background-color: #f6f8fa">object</span> <span style="color: #0550ae">{</span>
        <span style="color: #cf222e">const</span> <span style="color: #24292f;background-color: #f6f8fa">val</span> <span style="color: #953800">COMMAND_NAME</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"something-else"</span>
    <span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Making only that change, if we repackage our utility, and rerun the usage request, we get:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span style="color: #0550ae">$java</span> <span style="color: #116329">-jar</span> spring-cli-app-java/target/spring-cli-app-java-1.0-SNAPSHOT.jar
Usage: spring-boot-cli <span style="color: #0550ae">[</span><span style="color: #953800">command</span><span style="color: #0550ae">]</span> <span style="color: #0550ae">[</span><span style="color: #953800">command </span>options]
  Commands:
    example      Example <span style="color: #953800">command
      </span>Usage: example <span style="color: #0550ae">[</span>options]
        Options:
          <span style="color: #116329">--example</span>
            Example parameter

    something-else      Example <span style="color: #953800">command</span> <span style="color: #6e7781">#2</span>
      Usage: something-else
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Kotlin version looks exactly the same. Trust me. :)</p>
</div>
<div class="paragraph">
<p>One final note. Spring Boot can be pretty chatty in the logs/console, so I add this to my <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="title">src/main/resource/application.properties</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="properties"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span style="color: #0550ae">spring.main.banner-mode</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">off</span>
<span style="color: #0550ae">logging.level.root</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">ERROR</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="voila">Voila!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>That&#8217;s it. Any real CLI utility will obviously do more, but that should get you the plumbing you need. Just <code>@Autowire</code>
any Spring Beans you need, and you&#8217;re off to the races!</p>
</div>
</div>
</div>
    </div>
    <footer>
        <div class="grid">
            <div class="col tags">
                
                <span class="title">tags: </span>
                
                <a href="/tag/cli/">CLI</a>
                <!--                <a href="https://jasondl.ee/tags/CLI.html">CLI</a>-->
                
                <a href="/tag/spring-boot/">Spring Boot</a>
                <!--                <a href="https://jasondl.ee/tags/Spring Boot.html">Spring Boot</a>-->
                
                <a href="/tag/jcommander/">JCommander</a>
                <!--                <a href="https://jasondl.ee/tags/JCommander.html">JCommander</a>-->
                
                
            </div>
            <div class="col"><span class="share-page" style="">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://jasondl.ee/2020/writing-clis-with-spring-boot-and-jcommander&title=Writing CLIs with Spring Boot and JCommander" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <i class="fa fa-linkedin-square"></i>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=Writing CLIs with Spring Boot and JCommander&url=https://jasondl.ee/2020/writing-clis-with-spring-boot-and-jcommander&via=jasondlee&related=jasondlee" rel="nofollow" target="_blank" title="Share on Twitter">
      <i class="fa fa-twitter-square"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://jasondl.ee/2020/writing-clis-with-spring-boot-and-jcommander" rel="nofollow" target="_blank" title="Share on Facebook">
      <i class="fa fa-facebook-square"></i>
  </a>
  <a class="share-reddit" href="https://www.reddit.com/submit?url=https://jasondl.ee/2020/writing-clis-with-spring-boot-and-jcommander" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
      <i class="fa fa-reddit-square"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Writing CLIs with Spring Boot and JCommander&amp;body=Writing CLIs with Spring Boot and JCommander https://jasondl.ee/2020/writing-clis-with-spring-boot-and-jcommander" title="Share via Email" >
      <i class="fa fa-envelope"></i>
  </a>
</span>
</div>
        </div>
    </footer>
</article>

        </div>
    </div>
    <div class="col-3 widget">
        <div>
            <h3>Search</h3>
            <!-- HTML elements for search -->
            <input type="text" id="search-input" placeholder="Search blog posts.." style="width: 98%"/>
            <ul id="results-container"></ul>

            <script>
                var sjs = SimpleJekyllSearch({
                    searchInput: document.getElementById('search-input'),
                    resultsContainer: document.getElementById('results-container'),
                    json: '/search.json',
                    limit: 50
                })
            </script>
        </div>
        <div>
            <h3>Quotes</h3>
            <p id="quote">Sample quote</p>
            <p id="source">Quote source</p>
        </div>
        <div>
            <h3>About</h3>
            <p><img src="/images/profile-pic.jpg" style="float:right; object-fit: scale-down; padding-bottom: 1em;"/>My name is Jason Lee. I am a software developer living in the middle of Oklahoma. Ive been a professional developer since 1997,
using a variety of languages, including Java, Javascript, PHP, Python, Delphi, and even a bit of C#. I currently work for Red Hat
on the WildFly/EAP team, where, among other things, I maintain integrations for some MicroProfile specs, OpenTelemetry, Micrometer,
Jakarta Faces, and Bean Validation. (Full resume <a href="resume">here</a>.
LinkedIn <a href="https://www.linkedin.com/in/jasondlee">profile</a>)</p>

<p>I am the president of the Oklahoma City JUG, and an occasional speaker at the JUG and a variety of technical conferences.</p>

<p>On the personal side, Im active in my church, and enjoy bass guitar, running, fishing, and a variety of martial arts. Im also
married to a beautiful woman, and have two boys, who, thankfully, look like their mother.</p>

        </div>
        <div>
            <h3>My Links</h3>
            <ul>
                
                <li>
                    <a href="/presentations" title="Presentations">
                        Presentations
                    </a>
                </li>
                
                <li>
                    <a href="/assets/resume.pdf" title="Resume/CV">
                        Resume/CV
                    </a>
                </li>
                
                <li>
                    <a href="https://linkedin.com/in/jasondlee" title="LinkedIn">
                        LinkedIn
                    </a>
                </li>
                
                <li>
                    <a href="https://twitter.com/jasondlee" title="Twitter">
                        Twitter
                    </a>
                </li>
                
                <li>
                    <a href="https://mastodon.cloud/@jasondlee" title="Mastodon">
                        Mastodon
                    </a>
                </li>
                
                <li>
                    <a href="/tag" title="Tags">
                        Tags
                    </a>
                </li>
                
            </ul>

        </div>
        <div>
            <h3>Publications</h3>
            <ul>
                <li>
                    <div class="grid">
                        <div class="col-8" style="text-weight: bold; font-size: large">
                            <div>Java 9 Programming Blueprints:</div>
                            <div>
                                <a title="My Java 9 book at Amazon" href="https://amzn.to/2FD2XAo" style="padding-left: 10px">Amazon</a>
                            </div>
                            <div>
                                <a title="My Java 9 book at Packt"
                                   href="https://www.packtpub.com/application-development/java-9-programming-blueprints"
                                   style="padding-left: 10px">Packt</a>
                            </div>
                        </div>
                            <div class="col-4">
                                <a href="https://amzn.to/2FD2XAo"><img src="/images/2017/j9pb.png" width="100"/></a>
                            </div>
                    </div>
                </li>
                
                <li>
                    <a href="https://jaxenter.com/tips-for-writing-pluggable-java-ee-applications-105281.html" title="This article discusses ways to use Java EE specs to implement a simple, yet powerful plugin system with a minimum of thrid party libraries.">
                        Tips for Writing Pluggable Java EE Applications
                    </a>
                </li>
                
                <li>
                    <a href="http://www.oracle.com/technetwork/articles/javaee/jsf-templating-137822.html" title="An article Ken Paulsen and I wrote detailing easy JSF component creation">
                        JSFTemplating and Woodstock: Component Authoring Made Easy
                    </a>
                </li>
                
                <li>
                    <a href="http://jsfcentral.com/articles/lee-03-09.html" title="Jason Lee in depth: Mojarra and Scales">
                        Jason Lee in depth: Mojarra and Scales
                    </a>
                </li>
                
                <li>
                    <a href="https://web.archive.org/web/20090301060746/http://www.theserverside.com/news/thread.tss?thread_id=49343" title="My JavaOne 2008 Wrap Up">
                        Jason Lee: Postmortem for JavaOne 2008
                    </a>
                </li>
                
                <li>
                    <a href="https://web.archive.org/web/20130621192312/https://blogs.oracle.com/stories/entry/international_environmental" title="The GlassFish Adoption Story from my time at IEC">
                        International Environmental: A Cooling Company Which Prefers Hot Software
                    </a>
                </li>
                
                <li>
                    <a href="http://www.jsfcentral.com/articles/trenches_7.html" title="This details the project that spawned a couple of the Mojarra Scales components">
                        IEC donates custom JSF component to Mojarra Scales
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
<div class="footer">
    <div>
        <p>&#169; Copyright Jason Lee, 2005-2023. All rights reserved.</p>
    </div>
</div>
<!--
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-1091049-6', 'auto');
    ga('send', 'pageview');
</script>
-->
<script src="/assets/js/quotes.js" type="text/javascript"></script>
<script src="/assets/js/local.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
<script type="text/javascript" src="/assets/js/copy.js"></script>
</body>
</html>
