<!DOCTYPE html>
<html>
<head>
    <title>Coming Up for Air : Getting Started with Eclipse MicroProfile, Part 4: OpenLiberty</title>

    <script src="/assets/js/simple-jekyll-search.min.js" type="text/javascript"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3GQK1YDRQM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-3GQK1YDRQM');
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="me" href="https://mastodon.cloud/@jasondlee"/>

    <link rel="alternate" type="application/rss+xml" title="jasondl.ee RSS feed" href="/feed.xml">

    <link rel="stylesheet" href="/assets/css/main.css" />

    <!-- Web Fonts -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Cherry+Cream+Soda">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Philosopher">
    <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css"/>

    <link rel="stylesheet" href="https://unpkg.com/primeflex@3.1.2/primeflex.css"/>
    <link rel="stylesheet" href="https://unpkg.com/primeflex/themes/saga-blue.css"/>
    <link rel="author" href="/images/profile-pic.jpg"/>
</head>
<body>
<div class="grid">
    <div class="col blogname">
        <span>
            <a href="https://jasondl.ee">Coming Up for Air</a>
        </span>
    </div>
</div>
<div class="grid main">
    <div class="col-9">
        <div id="content">
            <article class="post">
    <h1 class="title" style="border-bottom: solid 1px #47586d; margin-bottom: 0.25rem;">
        Getting Started with Eclipse MicroProfile, Part 4: OpenLiberty
    </h1>
    Wednesday, October 17, 2018 | <span class="share-page" style="">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://jasondl.ee/2018/getting-started-with-eclipse-microprofile-part-4-openliberty&title=Getting Started with Eclipse MicroProfile, Part 4: OpenLiberty" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <i class="fa fa-linkedin-square"></i>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=Getting Started with Eclipse MicroProfile, Part 4: OpenLiberty&url=https://jasondl.ee/2018/getting-started-with-eclipse-microprofile-part-4-openliberty&via=jasondlee&related=jasondlee" rel="nofollow" target="_blank" title="Share on Twitter">
      <i class="fa fa-twitter-square"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://jasondl.ee/2018/getting-started-with-eclipse-microprofile-part-4-openliberty" rel="nofollow" target="_blank" title="Share on Facebook">
      <i class="fa fa-facebook-square"></i>
  </a>
  <a class="share-reddit" href="https://www.reddit.com/submit?url=https://jasondl.ee/2018/getting-started-with-eclipse-microprofile-part-4-openliberty" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
      <i class="fa fa-reddit-square"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Getting Started with Eclipse MicroProfile, Part 4: OpenLiberty&amp;body=Getting Started with Eclipse MicroProfile, Part 4: OpenLiberty https://jasondl.ee/2018/getting-started-with-eclipse-microprofile-part-4-openliberty" title="Share via Email" >
      <i class="fa fa-envelope"></i>
  </a>
</span>

    <div>
        <div class="paragraph">
<p>Having looked at <a href="/posts/2018/getting-started-with-eclipse-microprofile-part-3-thorntail.html">Thorntail</a> last time,
we&#8217;ll take a look at <a href="http://openliberty.io">OpenLiberty</a> this time. OpenLiberty is the open source project
under which, as I understand the state of things, IBM&#8217;s WebSphere Liberty is developed. In this installment, we&#8217;ll
give its MicroProfile support a quick spin.</p>
</div>
<div class="paragraph">
<p>We start by setting up our POM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="xml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="code"><pre><span style="color: #116329">&lt;packaging&gt;</span>war<span style="color: #116329">&lt;/packaging&gt;</span>

<span style="color: #116329">&lt;properties&gt;</span>
    <span style="color: #116329">&lt;app.name&gt;</span>openliberty<span style="color: #116329">&lt;/app.name&gt;</span>
    <span style="color: #116329">&lt;testServerHttpPort&gt;</span>8080<span style="color: #116329">&lt;/testServerHttpPort&gt;</span>
    <span style="color: #116329">&lt;testServerHttpsPort&gt;</span>8443<span style="color: #116329">&lt;/testServerHttpsPort&gt;</span>

    <span style="color: #116329">&lt;warContext&gt;</span>/<span style="color: #116329">&lt;/warContext&gt;</span>
    <span style="color: #116329">&lt;package.file&gt;</span>${project.build.directory}/${app.name}.zip<span style="color: #116329">&lt;/package.file&gt;</span>
    <span style="color: #116329">&lt;packaging.type&gt;</span>minify,runnable<span style="color: #116329">&lt;/packaging.type&gt;</span>

    <span style="color: #116329">&lt;version.openliberty&gt;</span>18.0.0.3<span style="color: #116329">&lt;/version.openliberty&gt;</span>
    <span style="color: #116329">&lt;version.openlibertyplugin&gt;</span>2.2<span style="color: #116329">&lt;/version.openlibertyplugin&gt;</span>
<span style="color: #116329">&lt;/properties&gt;</span>

<span style="color: #116329">&lt;dependencyManagement&gt;</span>
    <span style="color: #116329">&lt;dependencies&gt;</span>
        <span style="color: #116329">&lt;dependency&gt;</span>
            <span style="color: #116329">&lt;groupId&gt;</span>io.openliberty.features<span style="color: #116329">&lt;/groupId&gt;</span>
            <span style="color: #116329">&lt;artifactId&gt;</span>features-bom<span style="color: #116329">&lt;/artifactId&gt;</span>
            <span style="color: #116329">&lt;version&gt;</span>${version.openliberty}<span style="color: #116329">&lt;/version&gt;</span>
            <span style="color: #116329">&lt;type&gt;</span>pom<span style="color: #116329">&lt;/type&gt;</span>
            <span style="color: #116329">&lt;scope&gt;</span>import<span style="color: #116329">&lt;/scope&gt;</span>
        <span style="color: #116329">&lt;/dependency&gt;</span>
    <span style="color: #116329">&lt;/dependencies&gt;</span>
<span style="color: #116329">&lt;/dependencyManagement&gt;</span>

<span style="color: #116329">&lt;dependencies&gt;</span>
    <span style="color: #116329">&lt;dependency&gt;</span>
        <span style="color: #116329">&lt;groupId&gt;</span>${project.groupId}<span style="color: #116329">&lt;/groupId&gt;</span>
        <span style="color: #116329">&lt;artifactId&gt;</span>common<span style="color: #116329">&lt;/artifactId&gt;</span>
        <span style="color: #116329">&lt;version&gt;</span>${project.version}<span style="color: #116329">&lt;/version&gt;</span>
    <span style="color: #116329">&lt;/dependency&gt;</span>
<span style="color: #116329">&lt;/dependencies&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that we have no direct dependencies on OpenLiberty at this point. We simply build a war with one dependency, our
common code. The real work, it seems, comes in the build:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="xml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
</pre></td><td class="code"><pre><span style="color: #116329">&lt;plugin&gt;</span>
    <span style="color: #116329">&lt;groupId&gt;</span>net.wasdev.wlp.maven.plugins<span style="color: #116329">&lt;/groupId&gt;</span>
    <span style="color: #116329">&lt;artifactId&gt;</span>liberty-maven-plugin<span style="color: #116329">&lt;/artifactId&gt;</span>
    <span style="color: #116329">&lt;version&gt;</span>${version.openlibertyplugin}<span style="color: #116329">&lt;/version&gt;</span>
    <span style="color: #116329">&lt;configuration&gt;</span>
        <span style="color: #116329">&lt;assemblyArtifact&gt;</span>
            <span style="color: #116329">&lt;groupId&gt;</span>io.openliberty<span style="color: #116329">&lt;/groupId&gt;</span>
            <span style="color: #116329">&lt;artifactId&gt;</span>openliberty-runtime<span style="color: #116329">&lt;/artifactId&gt;</span>
            <span style="color: #116329">&lt;version&gt;</span>${version.openliberty}<span style="color: #116329">&lt;/version&gt;</span>
            <span style="color: #116329">&lt;type&gt;</span>zip<span style="color: #116329">&lt;/type&gt;</span>
        <span style="color: #116329">&lt;/assemblyArtifact&gt;</span>
        <span style="color: #116329">&lt;configFile&gt;</span>src/main/liberty/config/server.xml<span style="color: #116329">&lt;/configFile&gt;</span>
        <span style="color: #116329">&lt;packageFile&gt;</span>${package.file}<span style="color: #116329">&lt;/packageFile&gt;</span>
        <span style="color: #116329">&lt;include&gt;</span>${packaging.type}<span style="color: #116329">&lt;/include&gt;</span>
        <span style="color: #116329">&lt;bootstrapProperties&gt;</span>
            <span style="color: #116329">&lt;default.http.port&gt;</span>${testServerHttpPort}<span style="color: #116329">&lt;/default.http.port&gt;</span>
            <span style="color: #116329">&lt;default.https.port&gt;</span>${testServerHttpsPort}<span style="color: #116329">&lt;/default.https.port&gt;</span>
            <span style="color: #116329">&lt;app.context.root&gt;</span>${warContext}<span style="color: #116329">&lt;/app.context.root&gt;</span>
        <span style="color: #116329">&lt;/bootstrapProperties&gt;</span>
    <span style="color: #116329">&lt;/configuration&gt;</span>
    <span style="color: #116329">&lt;executions&gt;</span>
        <span style="color: #116329">&lt;execution&gt;</span>
            <span style="color: #116329">&lt;id&gt;</span>install-liberty<span style="color: #116329">&lt;/id&gt;</span>
            <span style="color: #116329">&lt;phase&gt;</span>process-test-resources<span style="color: #116329">&lt;/phase&gt;</span>
            <span style="color: #116329">&lt;goals&gt;</span>
                <span style="color: #116329">&lt;goal&gt;</span>install-server<span style="color: #116329">&lt;/goal&gt;</span>
            <span style="color: #116329">&lt;/goals&gt;</span>
        <span style="color: #116329">&lt;/execution&gt;</span>
        <span style="color: #116329">&lt;execution&gt;</span>
            <span style="color: #116329">&lt;id&gt;</span>install-app<span style="color: #116329">&lt;/id&gt;</span>
            <span style="color: #116329">&lt;phase&gt;</span>pre-integration-test<span style="color: #116329">&lt;/phase&gt;</span>
            <span style="color: #116329">&lt;goals&gt;</span>
                <span style="color: #116329">&lt;goal&gt;</span>install-apps<span style="color: #116329">&lt;/goal&gt;</span>
            <span style="color: #116329">&lt;/goals&gt;</span>
            <span style="color: #116329">&lt;configuration&gt;</span>
                <span style="color: #116329">&lt;looseApplication&gt;</span>true<span style="color: #116329">&lt;/looseApplication&gt;</span>
                <span style="color: #116329">&lt;stripVersion&gt;</span>true<span style="color: #116329">&lt;/stripVersion&gt;</span>
                <span style="color: #116329">&lt;installAppPackages&gt;</span>project<span style="color: #116329">&lt;/installAppPackages&gt;</span>
            <span style="color: #116329">&lt;/configuration&gt;</span>
        <span style="color: #116329">&lt;/execution&gt;</span>
        <span style="color: #116329">&lt;execution&gt;</span>
            <span style="color: #116329">&lt;id&gt;</span>package-app<span style="color: #116329">&lt;/id&gt;</span>
            <span style="color: #116329">&lt;phase&gt;</span>package<span style="color: #116329">&lt;/phase&gt;</span>
            <span style="color: #116329">&lt;goals&gt;</span>
                <span style="color: #116329">&lt;goal&gt;</span>package-server<span style="color: #116329">&lt;/goal&gt;</span>
            <span style="color: #116329">&lt;/goals&gt;</span>
            <span style="color: #116329">&lt;configuration&gt;</span>
                <span style="color: #116329">&lt;outputDirectory&gt;</span>target/wlp-package<span style="color: #116329">&lt;/outputDirectory&gt;</span>
            <span style="color: #116329">&lt;/configuration&gt;</span>
        <span style="color: #116329">&lt;/execution&gt;</span>
        <span style="color: #116329">&lt;execution&gt;</span>
            <span style="color: #116329">&lt;id&gt;</span>package-server<span style="color: #116329">&lt;/id&gt;</span>
            <span style="color: #116329">&lt;phase&gt;</span>package<span style="color: #116329">&lt;/phase&gt;</span>
            <span style="color: #116329">&lt;goals&gt;</span>
                <span style="color: #116329">&lt;goal&gt;</span>package-server<span style="color: #116329">&lt;/goal&gt;</span>
            <span style="color: #116329">&lt;/goals&gt;</span>
            <span style="color: #116329">&lt;configuration&gt;</span>
                <span style="color: #116329">&lt;outputDirectory&gt;</span>target/wlp-package<span style="color: #116329">&lt;/outputDirectory&gt;</span>
            <span style="color: #116329">&lt;/configuration&gt;</span>
        <span style="color: #116329">&lt;/execution&gt;</span>
    <span style="color: #116329">&lt;/executions&gt;</span>
<span style="color: #116329">&lt;/plugin&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>There is a <strong>lot</strong> going on there, but, as best as I can tell, we&#8217;re using the OpenLiberty Maven plugin to extract the
OpenLiberty server, add our app to it, then package it back up. It works, but it takes a lot of work to get there. :)</p>
</div>
<div class="paragraph">
<p>Before we can build, though, we do need to create one file to configure the OpenLiberty instance. That lives at
<code>src/main/liberty/config/server.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="xml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span style="color: #116329">&lt;server</span> <span style="color: #116329">description=</span><span style="color: #0a3069">"Sample MicroProfile server"</span><span style="color: #116329">&gt;</span>
    <span style="color: #116329">&lt;featureManager&gt;</span>
        <span style="color: #116329">&lt;feature&gt;</span>microProfile-2.0<span style="color: #116329">&lt;/feature&gt;</span>
    <span style="color: #116329">&lt;/featureManager&gt;</span>

    <span style="color: #116329">&lt;applicationManager</span> <span style="color: #116329">autoExpand=</span><span style="color: #0a3069">"true"</span><span style="color: #116329">/&gt;</span>

    <span style="color: #116329">&lt;httpEndpoint</span> <span style="color: #116329">host=</span><span style="color: #0a3069">"*"</span>
                  <span style="color: #116329">httpPort=</span><span style="color: #0a3069">"${default.http.port}"</span>
                  <span style="color: #116329">httpsPort=</span><span style="color: #0a3069">"${default.https.port}"</span>
                  <span style="color: #116329">id=</span><span style="color: #0a3069">"defaultHttpEndpoint"</span><span style="color: #116329">/&gt;</span>

    <span style="color: #116329">&lt;webApplication</span>
            <span style="color: #116329">location=</span><span style="color: #0a3069">"openliberty.war"</span>
            <span style="color: #116329">contextRoot=</span><span style="color: #0a3069">"${app.context.root}"</span><span style="color: #116329">/&gt;</span>
<span style="color: #116329">&lt;/server&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This tells OpenLiberty that we want to enable MicroProfile 2.0, what ports we want to listen on, what application to deploy, and its context root.</p>
</div>
<div class="paragraph">
<p>Once that&#8217;s done, we can run our app:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span style="color: #6e7781"># mvn install</span>
...
<span style="color: #6e7781"># java -jar target/openliberty.jar</span>
...
<span style="color: #0550ae">[</span>AUDIT   <span style="color: #0550ae">]</span> CWWKT0016I: Web application available <span style="color: #0550ae">(</span>default_host<span style="color: #0550ae">)</span>: http://jdlee:8080/
...
<span style="color: #6e7781"># curl http://localhost:8080</span>
Hello, world
<span style="color: #6e7781"># curl http://localhost:8080/?name=OpenLiberty</span>
Hello, OpenLiberty
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Just as expected. Before closing out this installment, though, a word on testing.</p>
</div>
<div class="paragraph">
<p>With the last two implementations, I was able to provide an <a href="http://arquillian.org">Arquillian</a>-based set of tests. Technically,
I think OpenLiberty can be tested with Arquillian, but I was unable to make it work. Obviously, if this were a production
project, I&#8217;d figure it out, but I took the easy way out here. :) However, in the OpenLiberty docs, they had some extra
<code>execution</code> configurations for the plugin that starts and stops the server for integration tests, so I went with that.
During the build, then, the server is started, the tests (which are just HTTP client calls to the server) run, and the
server is shutdown. Not as nice as Arquillian, but it works in a pinch.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start with Maven config:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="xml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre></td><td class="code"><pre><span style="color: #116329">&lt;plugin&gt;</span>
    <span style="color: #116329">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color: #116329">&lt;/groupId&gt;</span>
    <span style="color: #116329">&lt;artifactId&gt;</span>maven-surefire-plugin<span style="color: #116329">&lt;/artifactId&gt;</span>
    <span style="color: #116329">&lt;configuration&gt;</span>
        <span style="color: #116329">&lt;skipTests&gt;</span>true<span style="color: #116329">&lt;/skipTests&gt;</span>
    <span style="color: #116329">&lt;/configuration&gt;</span>
<span style="color: #116329">&lt;/plugin&gt;</span>
<span style="color: #116329">&lt;plugin&gt;</span>
    <span style="color: #116329">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color: #116329">&lt;/groupId&gt;</span>
    <span style="color: #116329">&lt;artifactId&gt;</span>maven-failsafe-plugin<span style="color: #116329">&lt;/artifactId&gt;</span>
    <span style="color: #116329">&lt;executions&gt;</span>
        <span style="color: #116329">&lt;execution&gt;</span>
            <span style="color: #116329">&lt;id&gt;</span>integration-tests<span style="color: #116329">&lt;/id&gt;</span>
            <span style="color: #116329">&lt;goals&gt;</span>
                <span style="color: #116329">&lt;goal&gt;</span>integration-test<span style="color: #116329">&lt;/goal&gt;</span>
                <span style="color: #116329">&lt;goal&gt;</span>verify<span style="color: #116329">&lt;/goal&gt;</span>
            <span style="color: #116329">&lt;/goals&gt;</span>
            <span style="color: #116329">&lt;configuration&gt;</span>
                <span style="color: #116329">&lt;includes&gt;</span>
                    <span style="color: #116329">&lt;include&gt;</span>**/*.java<span style="color: #116329">&lt;/include&gt;</span>
                <span style="color: #116329">&lt;/includes&gt;</span>
            <span style="color: #116329">&lt;/configuration&gt;</span>
        <span style="color: #116329">&lt;/execution&gt;</span>
    <span style="color: #116329">&lt;/executions&gt;</span>
<span style="color: #116329">&lt;/plugin&gt;</span>
<span style="color: #116329">&lt;plugin&gt;</span>
    <span style="color: #116329">&lt;groupId&gt;</span>net.wasdev.wlp.maven.plugins<span style="color: #116329">&lt;/groupId&gt;</span>
    <span style="color: #116329">&lt;artifactId&gt;</span>liberty-maven-plugin<span style="color: #116329">&lt;/artifactId&gt;</span>
    <span style="color: #116329">&lt;version&gt;</span>${version.openlibertyplugin}<span style="color: #116329">&lt;/version&gt;</span>
...
    <span style="color: #116329">&lt;executions&gt;</span>
...
        <span style="color: #116329">&lt;execution&gt;</span>
            <span style="color: #116329">&lt;id&gt;</span>start-server<span style="color: #116329">&lt;/id&gt;</span>
            <span style="color: #116329">&lt;phase&gt;</span>pre-integration-test<span style="color: #116329">&lt;/phase&gt;</span>
            <span style="color: #116329">&lt;goals&gt;</span>
                <span style="color: #116329">&lt;goal&gt;</span>test-start-server<span style="color: #116329">&lt;/goal&gt;</span>
            <span style="color: #116329">&lt;/goals&gt;</span>
        <span style="color: #116329">&lt;/execution&gt;</span>
        <span style="color: #116329">&lt;execution&gt;</span>
            <span style="color: #116329">&lt;id&gt;</span>stop-server<span style="color: #116329">&lt;/id&gt;</span>
            <span style="color: #116329">&lt;phase&gt;</span>post-integration-test<span style="color: #116329">&lt;/phase&gt;</span>
            <span style="color: #116329">&lt;goals&gt;</span>
                <span style="color: #116329">&lt;goal&gt;</span>test-stop-server<span style="color: #116329">&lt;/goal&gt;</span>
            <span style="color: #116329">&lt;/goals&gt;</span>
        <span style="color: #116329">&lt;/execution&gt;</span>
...
    <span style="color: #116329">&lt;/executions&gt;</span>
<span style="color: #116329">&lt;/plugin&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>We start by configuring the <code>surefire</code> plugin to <em>not</em> run during the test phase, then configure the <code>failsafe</code> plugin to
run during the <code>integration-test</code> phase. Finally, we set up executions for the <code>liberty-maven-plugin</code> to start and stop
the server in the <code>pre-integration-test</code> and <code>post-integration-test</code> phases. There are likely a myriad of ways to handle
that, so feel free to pick your favorite. This should get you going, though.</p>
</div>
<div class="paragraph">
<p>Our test, then, is pretty simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="code"><pre><span style="color: #cf222e">public</span> <span style="color: #cf222e">class</span> <span style="color: #953800">OpenLibertyTest</span> <span style="color: #0550ae">{</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">static</span> <span style="color: #cf222e">final</span> <span style="color: #953800">String</span> <span style="color: #953800">URL</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"http://localhost:8080/"</span><span style="color: #0550ae">;</span>

    <span style="color: #8250df">@Test</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">shouldSayWorld</span><span style="color: #0550ae">()</span> <span style="color: #cf222e">throws</span> <span style="color: #953800">URISyntaxException</span><span style="color: #0550ae">,</span> <span style="color: #953800">IOException</span> <span style="color: #0550ae">{</span>
        <span style="color: #24292f;background-color: #f6f8fa">requestAndTest</span><span style="color: #0550ae">(</span><span style="color: #cf222e">new</span> <span style="color: #953800">URI</span><span style="color: #0550ae">(</span><span style="color: #953800">URL</span><span style="color: #0550ae">),</span> <span style="color: #0a3069">"Hello, world"</span><span style="color: #0550ae">);</span>

    <span style="color: #0550ae">}</span>

    <span style="color: #8250df">@Test</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">shouldSayOpenLiberty</span><span style="color: #0550ae">()</span> <span style="color: #cf222e">throws</span> <span style="color: #953800">URISyntaxException</span><span style="color: #0550ae">,</span> <span style="color: #953800">IOException</span> <span style="color: #0550ae">{</span>
        <span style="color: #24292f;background-color: #f6f8fa">requestAndTest</span><span style="color: #0550ae">(</span><span style="color: #cf222e">new</span> <span style="color: #953800">URIBuilder</span><span style="color: #0550ae">(</span><span style="color: #cf222e">new</span> <span style="color: #953800">URI</span><span style="color: #0550ae">(</span><span style="color: #953800">URL</span><span style="color: #0550ae">))</span>
                        <span style="color: #0550ae">.</span><span style="color: #116329">setParameter</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"name"</span><span style="color: #0550ae">,</span> <span style="color: #0a3069">"OpenLiberty"</span><span style="color: #0550ae">)</span>
                        <span style="color: #0550ae">.</span><span style="color: #116329">build</span><span style="color: #0550ae">(),</span>
                <span style="color: #0a3069">"Hello, OpenLiberty"</span><span style="color: #0550ae">);</span>
    <span style="color: #0550ae">}</span>

    <span style="color: #cf222e">private</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">requestAndTest</span><span style="color: #0550ae">(</span><span style="color: #953800">URI</span> <span style="color: #24292f;background-color: #f6f8fa">uri</span><span style="color: #0550ae">,</span> <span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">s</span><span style="color: #0550ae">)</span> <span style="color: #cf222e">throws</span> <span style="color: #953800">IOException</span> <span style="color: #0550ae">{</span>
        <span style="color: #953800">System</span><span style="color: #0550ae">.</span><span style="color: #116329">out</span><span style="color: #0550ae">.</span><span style="color: #116329">println</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"Connecting to "</span> <span style="color: #0550ae">+</span> <span style="color: #24292f;background-color: #f6f8fa">uri</span><span style="color: #0550ae">.</span><span style="color: #116329">toString</span><span style="color: #0550ae">());</span>
        <span style="color: #cf222e">try</span> <span style="color: #0550ae">(</span><span style="color: #953800">CloseableHttpResponse</span> <span style="color: #24292f;background-color: #f6f8fa">response</span> <span style="color: #0550ae">=</span> <span style="color: #953800">HttpClients</span><span style="color: #0550ae">.</span><span style="color: #116329">createMinimal</span><span style="color: #0550ae">().</span><span style="color: #116329">execute</span><span style="color: #0550ae">(</span><span style="color: #cf222e">new</span> <span style="color: #953800">HttpGet</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">uri</span><span style="color: #0550ae">)))</span> <span style="color: #0550ae">{</span>
            <span style="color: #953800">Assertions</span><span style="color: #0550ae">.</span><span style="color: #116329">assertThat</span><span style="color: #0550ae">(</span><span style="color: #953800">EntityUtils</span><span style="color: #0550ae">.</span><span style="color: #116329">toString</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">response</span><span style="color: #0550ae">.</span><span style="color: #116329">getEntity</span><span style="color: #0550ae">()))</span>
                    <span style="color: #0550ae">.</span><span style="color: #116329">isEqualTo</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">s</span><span style="color: #0550ae">);</span>
        <span style="color: #0550ae">}</span>
    <span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>And we can see that test run by issuing this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre><span style="color: #6e7781"># mvn install</span>
...
<span style="color: #0550ae">[</span>INFO] <span style="color: #116329">---</span> maven-failsafe-plugin:2.22.1:integration-test <span style="color: #0550ae">(</span>integration-tests<span style="color: #0550ae">)</span> @ openliberty <span style="color: #116329">---</span>
<span style="color: #0550ae">[</span>INFO]
<span style="color: #0550ae">[</span>INFO] <span style="color: #116329">-------------------------------------------------------</span>
<span style="color: #0550ae">[</span>INFO]  T E S T S
<span style="color: #0550ae">[</span>INFO] <span style="color: #116329">-------------------------------------------------------</span>
<span style="color: #0550ae">[</span>INFO] Running com.steeplesoft.microprofile.openliberty.test.OpenLibertyTest
Connecting to http://localhost:8080/?name<span style="color: #0550ae">=</span>OpenLiberty
Connecting to http://localhost:8080/
<span style="color: #0550ae">[</span>INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.726 s - <span style="color: #cf222e">in </span>com.steeplesoft.microprofile.openliberty.test.OpenLibertyTest
<span style="color: #0550ae">[</span>INFO]
<span style="color: #0550ae">[</span>INFO] Results:
<span style="color: #0550ae">[</span>INFO]
<span style="color: #0550ae">[</span>INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0
<span style="color: #0550ae">[</span>INFO]
<span style="color: #0550ae">[</span>INFO]
<span style="color: #0550ae">[</span>INFO] <span style="color: #116329">---</span> liberty-maven-plugin:2.2:test-stop-server <span style="color: #0550ae">(</span>stop-server<span style="color: #0550ae">)</span> @ openliberty <span style="color: #116329">---</span>
...
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Like I said. It&#8217;s not the most elegant, but it should get you going, and with that, we&#8217;re done! In the next installment,
well see what it takes to get MicroProfile and Apache TomEE up and running.</p>
</div>
<div class="paragraph">
<p>You can find the source for the whole project <a href="https://bitbucket.org/jdlee/microprofile-demo/">here</a>, and for this part
<a href="https://bitbucket.org/jdlee/microprofile-demo/src/master/openliberty">here</a>.</p>
</div>
<div class="sect1">
<h2 id="update">UPDATE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Twitter user <a href="https://twitter.com/gcharters">gcharters</a> contacted me to
<a href="https://twitter.com/gcharters/status/1053214740862898176">tell me</a> about a parent POM that OpenLiberty users can use to
avoid some of the boilerplate above. You can find that POM
<a href="https://search.maven.org/artifact/net.wasdev.wlp.maven.parent/liberty-maven-app-parent/2.6.1/pom">here</a> and cut the size
of your POM significantly. Enjoy!</p>
</div>
</div>
</div>
    </div>
    <footer>
        <div class="grid">
            <div class="col tags">
                
                <span class="title">tags: </span>
                
                <a href="/tag/java-ee/">Java EE</a>
                <!--                <a href="https://jasondl.ee/tags/Java EE.html">Java EE</a>-->
                
                <a href="/tag/microprofile/">MicroProfile</a>
                <!--                <a href="https://jasondl.ee/tags/MicroProfile.html">MicroProfile</a>-->
                
                
            </div>
            <div class="col"><span class="share-page" style="">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://jasondl.ee/2018/getting-started-with-eclipse-microprofile-part-4-openliberty&title=Getting Started with Eclipse MicroProfile, Part 4: OpenLiberty" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <i class="fa fa-linkedin-square"></i>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=Getting Started with Eclipse MicroProfile, Part 4: OpenLiberty&url=https://jasondl.ee/2018/getting-started-with-eclipse-microprofile-part-4-openliberty&via=jasondlee&related=jasondlee" rel="nofollow" target="_blank" title="Share on Twitter">
      <i class="fa fa-twitter-square"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://jasondl.ee/2018/getting-started-with-eclipse-microprofile-part-4-openliberty" rel="nofollow" target="_blank" title="Share on Facebook">
      <i class="fa fa-facebook-square"></i>
  </a>
  <a class="share-reddit" href="https://www.reddit.com/submit?url=https://jasondl.ee/2018/getting-started-with-eclipse-microprofile-part-4-openliberty" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
      <i class="fa fa-reddit-square"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Getting Started with Eclipse MicroProfile, Part 4: OpenLiberty&amp;body=Getting Started with Eclipse MicroProfile, Part 4: OpenLiberty https://jasondl.ee/2018/getting-started-with-eclipse-microprofile-part-4-openliberty" title="Share via Email" >
      <i class="fa fa-envelope"></i>
  </a>
</span>
</div>
        </div>
    </footer>
</article>

        </div>
    </div>
    <div class="col-3 widget">
        <div>
            <h3>Search</h3>
            <!-- HTML elements for search -->
            <input type="text" id="search-input" placeholder="Search blog posts.." style="width: 98%"/>
            <ul id="results-container"></ul>

            <script>
                var sjs = SimpleJekyllSearch({
                    searchInput: document.getElementById('search-input'),
                    resultsContainer: document.getElementById('results-container'),
                    json: '/search.json',
                    limit: 50
                })
            </script>
        </div>
        <div>
            <h3>Quotes</h3>
            <p id="quote">Sample quote</p>
            <p id="source">Quote source</p>
        </div>
        <div>
            <h3>About</h3>
            <p><img src="/images/profile-pic.jpg" style="float:right; object-fit: scale-down; padding-bottom: 1em;"/>My name is Jason Lee. I am a software developer living in the middle of Oklahoma. I’ve been a professional developer since 1997,
using a variety of languages, including Java, Javascript, PHP, Python, Delphi, and even a bit of C#. I currently work for Red Hat
on the WildFly/EAP team, where, among other things, I maintain integrations for some MicroProfile specs, OpenTelemetry, Micrometer,
Jakarta Faces, and Bean Validation. (Full resume <a href="resume">here</a>.
LinkedIn <a href="https://www.linkedin.com/in/jasondlee">profile</a>)</p>

<p>I am the president of the Oklahoma City JUG, and an occasional speaker at the JUG and a variety of technical conferences.</p>

<p>On the personal side, I’m active in my church, and enjoy bass guitar, running, fishing, and a variety of martial arts. I’m also
married to a beautiful woman, and have two boys, who, thankfully, look like their mother.</p>

        </div>
        <div>
            <h3>My Links</h3>
            <ul>
                
                <li>
                    <a href="/presentations" title="Presentations">
                        Presentations
                    </a>
                </li>
                
                <li>
                    <a href="/assets/resume.pdf" title="Resume/CV">
                        Resume/CV
                    </a>
                </li>
                
                <li>
                    <a href="https://linkedin.com/in/jasondlee" title="LinkedIn">
                        LinkedIn
                    </a>
                </li>
                
                <li>
                    <a href="https://twitter.com/jasondlee" title="Twitter">
                        Twitter
                    </a>
                </li>
                
                <li>
                    <a href="https://mastodon.cloud/@jasondlee" title="Mastodon">
                        Mastodon
                    </a>
                </li>
                
                <li>
                    <a href="/tag" title="Tags">
                        Tags
                    </a>
                </li>
                
            </ul>

        </div>
        <div>
            <h3>Publications</h3>
            <ul>
                <li>
                    <div class="grid">
                        <div class="col-8" style="text-weight: bold; font-size: large">
                            <div>Java 9 Programming Blueprints:</div>
                            <div>
                                <a title="My Java 9 book at Amazon" href="https://amzn.to/2FD2XAo" style="padding-left: 10px">Amazon</a>
                            </div>
                            <div>
                                <a title="My Java 9 book at Packt"
                                   href="https://www.packtpub.com/application-development/java-9-programming-blueprints"
                                   style="padding-left: 10px">Packt</a>
                            </div>
                        </div>
                            <div class="col-4">
                                <a href="https://amzn.to/2FD2XAo"><img src="/images/2017/j9pb.png" width="100"/></a>
                            </div>
                    </div>
                </li>
                
                <li>
                    <a href="https://jaxenter.com/tips-for-writing-pluggable-java-ee-applications-105281.html" title="This article discusses ways to use Java EE specs to implement a simple, yet powerful plugin system with a minimum of thrid party libraries.">
                        Tips for Writing Pluggable Java EE Applications
                    </a>
                </li>
                
                <li>
                    <a href="http://www.oracle.com/technetwork/articles/javaee/jsf-templating-137822.html" title="An article Ken Paulsen and I wrote detailing easy JSF component creation">
                        JSFTemplating and Woodstock: Component Authoring Made Easy
                    </a>
                </li>
                
                <li>
                    <a href="http://jsfcentral.com/articles/lee-03-09.html" title="Jason Lee in depth: Mojarra and Scales">
                        Jason Lee in depth: Mojarra and Scales
                    </a>
                </li>
                
                <li>
                    <a href="https://web.archive.org/web/20090301060746/http://www.theserverside.com/news/thread.tss?thread_id=49343" title="My JavaOne 2008 Wrap Up">
                        Jason Lee: Postmortem for JavaOne 2008
                    </a>
                </li>
                
                <li>
                    <a href="https://web.archive.org/web/20130621192312/https://blogs.oracle.com/stories/entry/international_environmental" title="The GlassFish Adoption Story from my time at IEC">
                        International Environmental: A Cooling Company Which Prefers Hot Software
                    </a>
                </li>
                
                <li>
                    <a href="http://www.jsfcentral.com/articles/trenches_7.html" title="This details the project that spawned a couple of the Mojarra Scales components">
                        IEC donates custom JSF component to Mojarra Scales
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
<div class="footer">
    <div>
        <p>&#169; Copyright Jason Lee, 2005-2023. All rights reserved.</p>
    </div>
</div>
<!--
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-1091049-6', 'auto');
    ga('send', 'pageview');
</script>
-->
<script src="/assets/js/quotes.js" type="text/javascript"></script>
<script src="/assets/js/local.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
<script type="text/javascript" src="/assets/js/copy.js"></script>
</body>
</html>
