<!DOCTYPE html>
<html>
<head>
    <title>Coming Up for Air : Yahoo! UI Meets JavaServer Faces</title>

    <script src="/assets/js/simple-jekyll-search.min.js" type="text/javascript"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3GQK1YDRQM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-3GQK1YDRQM');
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="me" href="https://mastodon.cloud/@jasondlee"/>

    <link rel="alternate" type="application/rss+xml" title="jasondl.ee RSS feed" href="/feed.xml">

    <link rel="stylesheet" href="/assets/css/main.css" />

    <!-- Web Fonts -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Cherry+Cream+Soda">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Philosopher">
    <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css"/>

    <link rel="stylesheet" href="https://unpkg.com/primeflex@3.1.2/primeflex.css"/>
    <link rel="stylesheet" href="https://unpkg.com/primeflex/themes/saga-blue.css"/>
    <link rel="author" href="/images/profile-pic.jpg"/>
</head>
<body>
<div class="grid">
    <div class="col blogname">
        <span>
            <a href="https://jasondl.ee">Coming Up for Air</a>
        </span>
    </div>
</div>
<div class="grid main">
    <div class="col-9">
        <div id="content">
            <article class="post">
    <h1 class="title" style="border-bottom: solid 1px #47586d; margin-bottom: 0.25rem;">
        Yahoo! UI Meets JavaServer Faces
    </h1>
    Thursday, May 25, 2006 | <span class="share-page" style="">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://jasondl.ee/2006/yahoo-ui-meets-javaserver-faces&title=Yahoo! UI Meets JavaServer Faces" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <i class="fa fa-linkedin-square"></i>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=Yahoo! UI Meets JavaServer Faces&url=https://jasondl.ee/2006/yahoo-ui-meets-javaserver-faces&via=jasondlee&related=jasondlee" rel="nofollow" target="_blank" title="Share on Twitter">
      <i class="fa fa-twitter-square"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://jasondl.ee/2006/yahoo-ui-meets-javaserver-faces" rel="nofollow" target="_blank" title="Share on Facebook">
      <i class="fa fa-facebook-square"></i>
  </a>
  <a class="share-reddit" href="https://www.reddit.com/submit?url=https://jasondl.ee/2006/yahoo-ui-meets-javaserver-faces" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
      <i class="fa fa-reddit-square"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Yahoo! UI Meets JavaServer Faces&amp;body=Yahoo! UI Meets JavaServer Faces https://jasondl.ee/2006/yahoo-ui-meets-javaserver-faces" title="Share via Email" >
      <i class="fa fa-envelope"></i>
  </a>
</span>

    <div>
        <div class="paragraph">
<p>In my ongoing efforts to learn the JSF framework as thoroughly as possible, I decided to write a component, but, with the myriad of high quality components available, what was left for me to do? :P At the suggestion of my brother, who has been watching a similar effort underway in the <a href="http://wicket.sourceforge.net/">Wicket</a> space, I&#8217;ve decided to wrap Yahoo&#8217;s <a href="http://developer.yahoo.com/yui">UI library</a>.  The problem I ran into pretty quickly, though, was that the documentation wasn&#8217;t too clear as to what I needed to make it happen (though it&#8217;s quite likely I was having an obtuse moment or three).  There are a plethora of resources that discuss what needs to be done, but all seemed either incomplete or too disjointed (see disclaimer above).  So, to help ameliorate that, let&#8217;s walk through wrapping Yahoo&#8217;s calendar component as a JSF component, step by step.  Before I go much further, though, I must note that I am by no means an expert in this, so it&#8217;s likely that you&#8217;re going to see some less than ideal examples.  So, without further ado&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>When starting any project, it&#8217;s good idea to try to get a complete picture of what you&#8217;re going to need.  In my efforts to wrap YAHOO.widget.Calendar, I found that I need to create following files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="linenums"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>src/main/
	com/steeplesoft/jsf/components/yui/calendar
		CalendarRenderer.java
		CalendarTag.java
		UICalendar.java
	META-INF
		faces-config.xml
		yuisf.tld
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>There are other files in my project, but these are the pertinent ones for now.  With which file you start when writing components is probably largely a matter of personal taste, but we&#8217;ll start looking at things with <code>yuisf.tld</code>, as that will define how our tag looks to the outside world, giving us a good idea of what we&#8217;ll need to do in the rest of the files.  Here&#8217;s what the TLD looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="xml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="code"><pre><span style="color: #6e7781">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span style="color: #116329">&lt;taglib</span> <span style="color: #116329">xmlns=</span><span style="color: #0a3069">"http://java.sun.com/xml/ns/javaee"</span>
	<span style="color: #116329">xmlns:xsi=</span><span style="color: #0a3069">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span style="color: #116329">xsi:schemaLocation=</span><span style="color: #0a3069">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd"</span>
	<span style="color: #116329">version=</span><span style="color: #0a3069">"2.1"</span><span style="color: #116329">&gt;</span>
	<span style="color: #116329">&lt;tlib-version&gt;</span>0.1<span style="color: #116329">&lt;/tlib-version&gt;</span>
	<span style="color: #116329">&lt;jsp-version&gt;</span>1.2<span style="color: #116329">&lt;/jsp-version&gt;</span>
	<span style="color: #116329">&lt;short-name&gt;</span>yuisf<span style="color: #116329">&lt;/short-name&gt;</span>
	<span style="color: #116329">&lt;uri&gt;</span>http://steeplesoft.com/yuisf<span style="color: #116329">&lt;/uri&gt;</span>
	<span style="color: #116329">&lt;display-name&gt;</span>YahooUIJsfTags<span style="color: #116329">&lt;/display-name&gt;</span>
	<span style="color: #116329">&lt;description&gt;</span>
		Yahoo! User Interface JSF Tags This tag library contains tags which wrap
		several of the Yahoo! UI components.
	<span style="color: #116329">&lt;/description&gt;</span>
	<span style="color: #116329">&lt;tag&gt;</span>
		<span style="color: #116329">&lt;name&gt;</span>calendar<span style="color: #116329">&lt;/name&gt;</span>
		<span style="color: #116329">&lt;tag-class&gt;</span>
			com.steeplesoft.jsf.components.yui.calendar.CalendarTag
		<span style="color: #116329">&lt;/tag-class&gt;</span>
		<span style="color: #116329">&lt;body-content&gt;</span>JSP<span style="color: #116329">&lt;/body-content&gt;</span>
		<span style="color: #116329">&lt;description&gt;</span>Display a JavaScript calendar<span style="color: #116329">&lt;/description&gt;</span>
		<span style="color: #116329">&lt;attribute&gt;</span>
			<span style="color: #116329">&lt;name&gt;</span>textField<span style="color: #116329">&lt;/name&gt;</span>
			<span style="color: #116329">&lt;required&gt;</span>true<span style="color: #116329">&lt;/required&gt;</span>
			<span style="color: #116329">&lt;rtexprvalue&gt;</span>false<span style="color: #116329">&lt;/rtexprvalue&gt;</span>
			<span style="color: #116329">&lt;description&gt;</span>Text field that holds the date selected<span style="color: #116329">&lt;/description&gt;</span>
		<span style="color: #116329">&lt;/attribute&gt;</span>
	<span style="color: #116329">&lt;/tag&gt;</span>
<span style="color: #116329">&lt;/taglib&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Most of this should be fairly self-explanatory, so we&#8217;ll skip down to the <code>tag</code> element.  The first thing we do is give the tag a name, <code>calendar</code> (surprise, surprise), which will be the name used in your JSP templates.  Next, we define the class that will implement this tag, <code>com.steeplesoft.jsf.components.yui.calendar.CalendarTag</code>.  Skipping a bit more, we see one <code>attribute</code> element.  This is where we define what attributes a user can set on our tag.  For this tag, we declare a <code>textField</code> attribute, which is required.</p>
</div>
<div class="paragraph">
<p><code>CalendarTag</code> implements our tag.  Since we don&#8217;t need any JSF 1.2-specific features, and we want the tag to be available to a wider audience, we&#8217;ll target 1.1, which means that our class will need to extend <code>UIComponentTag</code>.  Let&#8217;s take a look at that class now:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="code"><pre><span style="color: #cf222e">package</span> <span style="color: #953800">com.steeplesoft.jsf.components.yui.calendar</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">javax.faces.component.UIComponent</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">javax.faces.el.ValueBinding</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">javax.faces.webapp.UIComponentTag</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">com.sun.faces.util.Util</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">public</span> <span style="color: #cf222e">class</span> <span style="color: #953800">CalendarTag</span> <span style="color: #cf222e">extends</span> <span style="color: #953800">UIComponentTag</span> <span style="color: #0550ae">{</span>
	<span style="color: #cf222e">private</span> <span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">=</span><span style="color: #0550ae">null</span><span style="color: #0550ae">;</span>
	<span style="color: #cf222e">public</span> <span style="color: #953800">String</span> <span style="color: #8250df">getComponentType</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
		<span style="color: #cf222e">return</span> <span style="color: #953800">UICalendar</span><span style="color: #0550ae">.</span><span style="color: #116329">COMPONENT_TYPE</span><span style="color: #0550ae">;</span>
	<span style="color: #0550ae">}</span>
	<span style="color: #cf222e">public</span> <span style="color: #953800">String</span> <span style="color: #8250df">getRendererType</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
		<span style="color: #cf222e">return</span> <span style="color: #953800">UICalendar</span><span style="color: #0550ae">.</span><span style="color: #116329">RENDERER_TYPE</span><span style="color: #0550ae">;</span>
	<span style="color: #0550ae">}</span>
	<span style="color: #cf222e">protected</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">setProperties</span><span style="color: #0550ae">(</span><span style="color: #953800">UIComponent</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
		<span style="color: #cf222e">super</span><span style="color: #0550ae">.</span><span style="color: #116329">setProperties</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">);</span>
		<span style="color: #953800">UICalendar</span> <span style="color: #24292f;background-color: #f6f8fa">calendar</span><span style="color: #0550ae">;</span>
		<span style="color: #cf222e">try</span> <span style="color: #0550ae">{</span>
			<span style="color: #24292f;background-color: #f6f8fa">calendar</span><span style="color: #0550ae">=(</span><span style="color: #953800">UICalendar</span><span style="color: #0550ae">)</span><span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">;</span>
		<span style="color: #0550ae">}</span> <span style="color: #cf222e">catch</span> <span style="color: #0550ae">(</span><span style="color: #953800">ClassCastException</span> <span style="color: #24292f;background-color: #f6f8fa">cce</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
			<span style="color: #cf222e">throw</span> <span style="color: #cf222e">new</span> <span style="color: #8250df">IllegalStateException</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"Component "</span> <span style="color: #0550ae">+</span>
					<span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">.</span><span style="color: #116329">toString</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">+</span>
					<span style="color: #0a3069">" not expected type.  Expected: UICalendar.  Perhaps you're missing a tag?"</span><span style="color: #0550ae">);</span>
		<span style="color: #0550ae">}</span>
		<span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">textField</span> <span style="color: #0550ae">!=</span> <span style="color: #0550ae">null</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
			<span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">isValueReference</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">))</span> <span style="color: #0550ae">{</span>
				<span style="color: #953800">ValueBinding</span> <span style="color: #24292f;background-color: #f6f8fa">vb</span> <span style="color: #0550ae">=</span> <span style="color: #953800">Util</span><span style="color: #0550ae">.</span><span style="color: #116329">getValueBinding</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">);</span>
				<span style="color: #24292f;background-color: #f6f8fa">calendar</span><span style="color: #0550ae">.</span><span style="color: #116329">setValueBinding</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"textField"</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">vb</span><span style="color: #0550ae">);</span>
			<span style="color: #0550ae">}</span> <span style="color: #cf222e">else</span> <span style="color: #0550ae">{</span>
				<span style="color: #24292f;background-color: #f6f8fa">calendar</span><span style="color: #0550ae">.</span><span style="color: #116329">setTextField</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">);</span>
			<span style="color: #0550ae">}</span>
		<span style="color: #0550ae">}</span>
	<span style="color: #0550ae">}</span>
	<span style="color: #cf222e">public</span> <span style="color: #953800">String</span> <span style="color: #8250df">getTextField</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
		<span style="color: #cf222e">return</span> <span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">;</span>
	<span style="color: #0550ae">}</span>
	<span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">setTextField</span><span style="color: #0550ae">(</span><span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
		<span style="color: #cf222e">this</span><span style="color: #0550ae">.</span><span style="color: #116329">textField</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">;</span>
	<span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>There are three methods that we need to override:  <code>getComponentType()</code>, <code>getRendererType()</code>, and <code>setProperties(UIComponent component)</code>.  In our implementation of the first two methods, we simply return a public static String from UICalendar, which we&#8217;ll see in a moment.  These values will be used to help tie the component in just a moment.  The third method is &lt;a title: "quoth the Ryan Lubke"&gt;where the magic happens&lt;/a&gt;.  Since we want the component to be value binding aware, we set the textField attribute to <code>rtexprvalue=false</code> in yuisf.tld, and check to see if the value passed is a literal or value binding expression, and handle it appropriately.  Is that overkill for this field? Most likely. ;)  Note also, that we have accessors for each attribute exposed in the TLD."</p>
</div>
<div class="paragraph">
<p><code>UICalendar</code> is the actual component.  For no particularly compelling reason, I&#8217;ve chosen to extend <code>javax.faces.component.UIPanel</code>.  Let&#8217;s take a look:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre><span style="color: #cf222e">package</span> <span style="color: #953800">com.steeplesoft.jsf.components.yui.calendar</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">javax.faces.component.UIPanel</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">public</span> <span style="color: #cf222e">class</span> <span style="color: #953800">UICalendar</span> <span style="color: #cf222e">extends</span> <span style="color: #953800">UIPanel</span> <span style="color: #0550ae">{</span>
	<span style="color: #cf222e">public</span> <span style="color: #cf222e">static</span> <span style="color: #cf222e">final</span> <span style="color: #953800">String</span> <span style="color: #953800">COMPONENT_TYPE</span> <span style="color: #0550ae">=</span>
			<span style="color: #0a3069">"com.steeplesoft.jsf.components.yui.calendar.Calendar"</span><span style="color: #0550ae">;</span>
	<span style="color: #cf222e">public</span> <span style="color: #cf222e">static</span> <span style="color: #cf222e">final</span> <span style="color: #953800">String</span> <span style="color: #953800">RENDERER_TYPE</span> <span style="color: #0550ae">=</span>
			<span style="color: #0a3069">"com.steeplesoft.jsf.components.yui.calendar.Calendar"</span><span style="color: #0550ae">;</span>
	<span style="color: #cf222e">protected</span> <span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">;</span>
	<span style="color: #cf222e">public</span> <span style="color: #953800">String</span> <span style="color: #8250df">getTextField</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
		<span style="color: #cf222e">return</span> <span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">;</span>
	<span style="color: #0550ae">}</span>
	<span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">setTextField</span><span style="color: #0550ae">(</span><span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
		<span style="color: #cf222e">this</span><span style="color: #0550ae">.</span><span style="color: #116329">textField</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">;</span>
	<span style="color: #0550ae">}</span>
	<span style="color: #cf222e">public</span> <span style="color: #8250df">UICalendar</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
		<span style="color: #24292f;background-color: #f6f8fa">setRendererType</span><span style="color: #0550ae">(</span><span style="color: #953800">RENDERER_TYPE</span><span style="color: #0550ae">);</span>
	<span style="color: #0550ae">}</span>
	<span style="color: #cf222e">public</span> <span style="color: #953800">String</span> <span style="color: #8250df">getFamily</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
		<span style="color: #cf222e">return</span> <span style="color: #0a3069">"YuiCalendar"</span><span style="color: #0550ae">;</span>
	<span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class doesn&#8217;t do much of anything of interest, but it&#8217;s important for a couple of reasons.  Via the constuctor and <code>getFamily</code>, more pieces are put in place to tie all of our files together to make our new component.  We also defined a property and accessors for our <code>textField</code> attribute, which will make working with the component in Java code a bit nicer.  Note also that <code>public static Strings</code> defined at the top.  We&#8217;ve already seen these referenced once in our tag class, and we&#8217;ll see in a moment the final place these values are referenced.</p>
</div>
<div class="paragraph">
<p>All of this work is for naught if JSF doesn&#8217;t know how to render the component.  We&#8217;ll do that now, via CalendarRenderer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre></td><td class="code"><pre><span style="color: #cf222e">package</span> <span style="color: #953800">com.steeplesoft.jsf.components.yui.calendar</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">java.io.IOException</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">java.net.URL</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">javax.faces.component.UIComponent</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">javax.faces.context.FacesContext</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">javax.faces.context.ResponseWriter</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">javax.faces.render.Renderer</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">import</span> <span style="color: #953800">com.steeplesoft.jsf.components.yui.utils.RendererHelper</span><span style="color: #0550ae">;</span>
<span style="color: #cf222e">public</span> <span style="color: #cf222e">class</span> <span style="color: #953800">CalendarRenderer</span> <span style="color: #cf222e">extends</span> <span style="color: #953800">Renderer</span> <span style="color: #0550ae">{</span>
	<span style="color: #cf222e">private</span> <span style="color: #cf222e">static</span> <span style="color: #cf222e">final</span> <span style="color: #953800">String</span> <span style="color: #953800">CALENDAR_CSS_RENDERED_SCRIPT_KEY</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"yui_calendar_css_rendered"</span><span style="color: #0550ae">;</span>
	<span style="color: #cf222e">private</span> <span style="color: #cf222e">static</span> <span style="color: #cf222e">final</span> <span style="color: #953800">String</span> <span style="color: #953800">CALENDAR_RENDERED_SCRIPT_KEY</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">"yui_calendar_js_rendered"</span><span style="color: #0550ae">;</span>
	<span style="color: #cf222e">public</span> <span style="color: #8250df">CalendarRenderer</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
		<span style="color: #6e7781">//</span>
	<span style="color: #0550ae">}</span>
	<span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">encodeEnd</span><span style="color: #0550ae">(</span><span style="color: #953800">FacesContext</span> <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span> <span style="color: #953800">UIComponent</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">)</span> <span style="color: #cf222e">throws</span> <span style="color: #953800">IOException</span> <span style="color: #0550ae">{</span>
		<span style="color: #cf222e">if</span> <span style="color: #0550ae">((</span><span style="color: #24292f;background-color: #f6f8fa">context</span> <span style="color: #0550ae">==</span> <span style="color: #0550ae">null</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">||</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">component</span> <span style="color: #0550ae">==</span> <span style="color: #0550ae">null</span><span style="color: #0550ae">))</span> <span style="color: #0550ae">{</span>
			<span style="color: #cf222e">throw</span> <span style="color: #cf222e">new</span> <span style="color: #8250df">NullPointerException</span><span style="color: #0550ae">();</span>
		<span style="color: #0550ae">}</span>
		<span style="color: #953800">ResponseWriter</span> <span style="color: #24292f;background-color: #f6f8fa">writer</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">.</span><span style="color: #116329">getResponseWriter</span><span style="color: #0550ae">();</span>
		<span style="color: #cf222e">if</span> <span style="color: #0550ae">(!</span><span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">hasBeenRendered</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">YAHOO_RENDERED_SCRIPT_KEY</span><span style="color: #0550ae">))</span> <span style="color: #0550ae">{</span>
			<span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">writeScriptTag</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">writer</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">RESOURCE_PREFIX</span> <span style="color: #0550ae">+</span><span style="color: #0a3069">"/META-INF/yahoo.js"</span><span style="color: #0550ae">);</span>
		<span style="color: #0550ae">}</span>
		<span style="color: #cf222e">if</span> <span style="color: #0550ae">(!</span><span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">hasBeenRendered</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">DOM_RENDERED_SCRIPT_KEY</span><span style="color: #0550ae">))</span> <span style="color: #0550ae">{</span>
			<span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">writeScriptTag</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">writer</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">RESOURCE_PREFIX</span> <span style="color: #0550ae">+</span><span style="color: #0a3069">"/META-INF/dom.js"</span><span style="color: #0550ae">);</span>
		<span style="color: #0550ae">}</span>
		<span style="color: #cf222e">if</span> <span style="color: #0550ae">(!</span><span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">hasBeenRendered</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">EVENT_RENDERED_SCRIPT_KEY</span><span style="color: #0550ae">))</span> <span style="color: #0550ae">{</span>
			<span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">writeScriptTag</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">writer</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">RESOURCE_PREFIX</span> <span style="color: #0550ae">+</span><span style="color: #0a3069">"/META-INF/event.js"</span><span style="color: #0550ae">);</span>
		<span style="color: #0550ae">}</span>
		<span style="color: #cf222e">if</span> <span style="color: #0550ae">(!</span><span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">hasBeenRendered</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span> <span style="color: #953800">CALENDAR_RENDERED_SCRIPT_KEY</span><span style="color: #0550ae">))</span> <span style="color: #0550ae">{</span>
			<span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">writeScriptTag</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">writer</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">RESOURCE_PREFIX</span> <span style="color: #0550ae">+</span><span style="color: #0a3069">"/META-INF/calendar/calendar.js"</span><span style="color: #0550ae">);</span>
		<span style="color: #0550ae">}</span>
		<span style="color: #cf222e">if</span> <span style="color: #0550ae">(!</span><span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">hasBeenRendered</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">JS_UTIL_RENDERED_SCRIPT_KEY</span><span style="color: #0550ae">))</span> <span style="color: #0550ae">{</span>
			<span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">writeScriptTag</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">writer</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">RESOURCE_PREFIX</span> <span style="color: #0550ae">+</span><span style="color: #0a3069">"/META-INF/js-utils.js"</span><span style="color: #0550ae">);</span>
		<span style="color: #0550ae">}</span>
		<span style="color: #cf222e">if</span> <span style="color: #0550ae">(!</span><span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">hasBeenRendered</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span> <span style="color: #953800">CALENDAR_CSS_RENDERED_SCRIPT_KEY</span><span style="color: #0550ae">))</span> <span style="color: #0550ae">{</span>
			<span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">writeCssLinkTag</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">writer</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">RESOURCE_PREFIX</span> <span style="color: #0550ae">+</span><span style="color: #0a3069">"/META-INF/calendar/calendar.css"</span><span style="color: #0550ae">);</span>
		<span style="color: #0550ae">}</span>
		<span style="color: #24292f;background-color: #f6f8fa">writeCalendarMarkUp</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">writer</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">);</span>
	<span style="color: #0550ae">}</span>
	<span style="color: #cf222e">protected</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">writeCalendarMarkUp</span> <span style="color: #0550ae">(</span><span style="color: #953800">FacesContext</span> <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span> <span style="color: #953800">ResponseWriter</span> <span style="color: #24292f;background-color: #f6f8fa">writer</span><span style="color: #0550ae">,</span> <span style="color: #953800">UIComponent</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">)</span> <span style="color: #cf222e">throws</span> <span style="color: #953800">IOException</span> <span style="color: #0550ae">{</span>
		<span style="color: #953800">UIComponent</span> <span style="color: #24292f;background-color: #f6f8fa">textField</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">.</span><span style="color: #116329">findComponent</span><span style="color: #0550ae">((</span><span style="color: #953800">String</span><span style="color: #0550ae">)</span><span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">.</span><span style="color: #116329">getAttributes</span><span style="color: #0550ae">().</span><span style="color: #116329">get</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"textField"</span><span style="color: #0550ae">));</span>
		<span style="color: #953800">URL</span> <span style="color: #24292f;background-color: #f6f8fa">sxURL</span> <span style="color: #0550ae">=</span> <span style="color: #953800">CalendarRenderer</span><span style="color: #0550ae">.</span><span style="color: #116329">class</span><span style="color: #0550ae">.</span><span style="color: #116329">getResource</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"/META-INF/calendar/CalendarTemplate.txt"</span><span style="color: #0550ae">);</span>
		<span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">sxTemplate</span> <span style="color: #0550ae">=</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">readInFragmentAsString</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">sxURL</span><span style="color: #0550ae">);</span>
		<span style="color: #24292f;background-color: #f6f8fa">sxTemplate</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">sxTemplate</span><span style="color: #0550ae">.</span><span style="color: #116329">replaceAll</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"%%%DIV_ID%%%"</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">component</span><span style="color: #0550ae">.</span><span style="color: #116329">getId</span><span style="color: #0550ae">())</span>
			<span style="color: #0550ae">.</span><span style="color: #116329">replaceAll</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"%%%TF_ID%%%"</span><span style="color: #0550ae">,</span> <span style="color: #24292f;background-color: #f6f8fa">textField</span><span style="color: #0550ae">.</span><span style="color: #116329">getClientId</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">))</span>
			<span style="color: #0550ae">.</span><span style="color: #116329">replaceAll</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"%%%RESOURCE_PREFIX%%%"</span><span style="color: #0550ae">,</span> <span style="color: #953800">RendererHelper</span><span style="color: #0550ae">.</span><span style="color: #116329">RESOURCE_PREFIX</span><span style="color: #0550ae">);</span>
		<span style="color: #24292f;background-color: #f6f8fa">writer</span><span style="color: #0550ae">.</span><span style="color: #116329">write</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">sxTemplate</span><span style="color: #0550ae">);</span>
	<span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class is the most interesting of all that we&#8217;ve done thus far, as this is where the user interface magic happens.  It is via the renderer that the component is turned from Java source, TLDs, and view templating mark up into a real live HTML (in our case) widget.  For those not familiar with the <a href="http://developer.yahoo.com/yui/calendar/">calendar</a> component, here is what we want our output to look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="html"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre><span style="color: #116329">&lt;input</span> <span style="color: #116329">id=</span><span style="color: #0a3069">"j_id_id15:test"</span> <span style="color: #116329">type:</span> <span style="color: #f6f8fa;background-color: #82071e">"</span><span style="color: #116329">text</span><span style="color: #f6f8fa;background-color: #82071e">"</span> <span style="color: #116329">name=</span><span style="color: #0a3069">"j_id_id15:test"</span> <span style="color: #116329">readonly=</span><span style="color: #0a3069">"readonly"</span> <span style="color: #116329">/&gt;</span>
<span style="color: #116329">&lt;script </span><span style="color: #116329">type:</span> <span style="color: #f6f8fa;background-color: #82071e">"</span><span style="color: #116329">text</span><span style="color: #f6f8fa;background-color: #82071e">/</span><span style="color: #116329">javascript</span><span style="color: #f6f8fa;background-color: #82071e">"</span> <span style="color: #116329">src=</span><span style="color: #0a3069">"resource.jsf?r=/META-INF/yahoo.js"</span><span style="color: #116329">&gt;&lt;/script&gt;</span>
<span style="color: #116329">&lt;script </span><span style="color: #116329">type:</span> <span style="color: #f6f8fa;background-color: #82071e">"</span><span style="color: #116329">text</span><span style="color: #f6f8fa;background-color: #82071e">/</span><span style="color: #116329">javascript</span><span style="color: #f6f8fa;background-color: #82071e">"</span> <span style="color: #116329">src=</span><span style="color: #0a3069">"resource.jsf?r=/META-INF/dom.js"</span><span style="color: #116329">&gt;&lt;/script&gt;</span>
<span style="color: #116329">&lt;script </span><span style="color: #116329">type:</span> <span style="color: #f6f8fa;background-color: #82071e">"</span><span style="color: #116329">text</span><span style="color: #f6f8fa;background-color: #82071e">/</span><span style="color: #116329">javascript</span><span style="color: #f6f8fa;background-color: #82071e">"</span> <span style="color: #116329">src=</span><span style="color: #0a3069">"resource.jsf?r=/META-INF/event.js"</span><span style="color: #116329">&gt;&lt;/script&gt;</span>
<span style="color: #116329">&lt;script </span><span style="color: #116329">type:</span> <span style="color: #f6f8fa;background-color: #82071e">"</span><span style="color: #116329">text</span><span style="color: #f6f8fa;background-color: #82071e">/</span><span style="color: #116329">javascript</span><span style="color: #f6f8fa;background-color: #82071e">"</span> <span style="color: #116329">src=</span><span style="color: #0a3069">"resource.jsf?r=/META-INF/calendar/calendar.js"</span><span style="color: #116329">&gt;&lt;/script&gt;</span>
<span style="color: #116329">&lt;script </span><span style="color: #116329">type:</span> <span style="color: #f6f8fa;background-color: #82071e">"</span><span style="color: #116329">text</span><span style="color: #f6f8fa;background-color: #82071e">/</span><span style="color: #116329">javascript</span><span style="color: #f6f8fa;background-color: #82071e">"</span> <span style="color: #116329">src=</span><span style="color: #0a3069">"resource.jsf?r=/META-INF/js-utils.js"</span><span style="color: #116329">&gt;&lt;/script&gt;</span>
<span style="color: #116329">&lt;link</span> <span style="color: #116329">type:</span> <span style="color: #f6f8fa;background-color: #82071e">"</span><span style="color: #116329">text</span><span style="color: #f6f8fa;background-color: #82071e">/</span><span style="color: #116329">css</span><span style="color: #f6f8fa;background-color: #82071e">"</span> <span style="color: #116329">rel=</span><span style="color: #0a3069">"stylesheet"</span> <span style="color: #116329">href=</span><span style="color: #0a3069">"resource.jsf?r=/META-INF/calendar/calendar.css"</span> <span style="color: #116329">/&gt;</span>
<span style="color: #116329">&lt;img</span> <span style="color: #116329">id=</span><span style="color: #0a3069">"img_j_id_id18"</span> <span style="color: #116329">alt=</span><span style="color: #0a3069">"calendar"</span> <span style="color: #116329">src=</span><span style="color: #0a3069">"resource.jsf?r=/META-INF/calendar/calendar_icon.gif"</span>
	<span style="color: #116329">onclick=</span><span style="color: #0a3069">"show(this,'j_id_id18')"</span> <span style="color: #116329">/&gt;</span>
<span style="color: #116329">&lt;div</span> <span style="color: #116329">id=</span><span style="color: #0a3069">"j_id_id18"</span> <span style="color: #116329">style=</span><span style="color: #0a3069">"visibility: hidden; display: inline;"</span> <span style="color: #116329">/&gt;&lt;/div&gt;</span>
<span style="color: #116329">&lt;script </span><span style="color: #116329">type:</span> <span style="color: #f6f8fa;background-color: #82071e">"</span><span style="color: #116329">text</span><span style="color: #f6f8fa;background-color: #82071e">/</span><span style="color: #116329">javascript</span><span style="color: #f6f8fa;background-color: #82071e">"</span><span style="color: #116329">&gt;</span>
	<span style="color: #cf222e">function</span> <span style="color: #8250df">j_id_id18_calOnSelect</span><span style="color: #24292f;background-color: #f6f8fa">()</span> <span style="color: #24292f;background-color: #f6f8fa">{</span>
		<span style="color: #cf222e">var</span> <span style="color: #24292f;background-color: #f6f8fa">tf</span> <span style="color: #0550ae">=</span> <span style="color: #953800">document</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">getElementById</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">"</span><span style="color: #0a3069">j_id_id15:test</span><span style="color: #0a3069">"</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
		<span style="color: #24292f;background-color: #f6f8fa">tf</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">value</span> <span style="color: #0550ae">=</span> <span style="color: #8250df">formatDate</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">j_id_id18_cal</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">getSelectedDates</span><span style="color: #24292f;background-color: #f6f8fa">()[</span><span style="color: #0550ae">0</span><span style="color: #24292f;background-color: #f6f8fa">]);</span>
		<span style="color: #cf222e">var</span> <span style="color: #24292f;background-color: #f6f8fa">cal</span> <span style="color: #0550ae">=</span> <span style="color: #953800">document</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">getElementById</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">"</span><span style="color: #0a3069">j_id_id18</span><span style="color: #0a3069">"</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
		<span style="color: #24292f;background-color: #f6f8fa">cal</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">style</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">visibility</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">'</span><span style="color: #0a3069">hidden</span><span style="color: #0a3069">'</span><span style="color: #24292f;background-color: #f6f8fa">;</span>
	<span style="color: #24292f;background-color: #f6f8fa">}</span>
	<span style="color: #24292f;background-color: #f6f8fa">j_id_id18_cal</span> <span style="color: #0550ae">=</span> <span style="color: #cf222e">new</span> <span style="color: #24292f;background-color: #f6f8fa">YAHOO</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">widget</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #953800">Calendar</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">"</span><span style="color: #0a3069">j_id_id18_cal</span><span style="color: #0a3069">"</span><span style="color: #24292f;background-color: #f6f8fa">,</span><span style="color: #0a3069">"</span><span style="color: #0a3069">j_id_id18</span><span style="color: #0a3069">"</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
	<span style="color: #24292f;background-color: #f6f8fa">j_id_id18_cal</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">onSelect</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">j_id_id18_calOnSelect</span><span style="color: #24292f;background-color: #f6f8fa">;</span>
	<span style="color: #cf222e">var</span> <span style="color: #24292f;background-color: #f6f8fa">pos</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">YAHOO</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">util</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">Dom</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">getXY</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">"</span><span style="color: #0a3069">img_j_id_id18</span><span style="color: #0a3069">"</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
	<span style="color: #cf222e">var</span> <span style="color: #24292f;background-color: #f6f8fa">img_height</span> <span style="color: #0550ae">=</span> <span style="color: #8250df">parseInt</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">YAHOO</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">util</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">Dom</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">getStyle</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">"</span><span style="color: #0a3069">img_j_id_id18</span><span style="color: #0a3069">"</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">"</span><span style="color: #0a3069">height</span><span style="color: #0a3069">"</span><span style="color: #24292f;background-color: #f6f8fa">));</span>
	<span style="color: #24292f;background-color: #f6f8fa">elem</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">YAHOO</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">util</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">Dom</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">get</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">"</span><span style="color: #0a3069">j_id_id18</span><span style="color: #0a3069">"</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
	<span style="color: #24292f;background-color: #f6f8fa">elem</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">style</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">top</span>  <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">pos</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0550ae">1</span><span style="color: #24292f;background-color: #f6f8fa">]</span> <span style="color: #0550ae">+</span> <span style="color: #24292f;background-color: #f6f8fa">img_height</span> <span style="color: #0550ae">-</span> <span style="color: #0550ae">1</span> <span style="color: #0550ae">+</span> <span style="color: #0a3069">"</span><span style="color: #0a3069">px</span><span style="color: #0a3069">"</span><span style="color: #24292f;background-color: #f6f8fa">;</span>
	<span style="color: #24292f;background-color: #f6f8fa">elem</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">style</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">left</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">pos</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0550ae">0</span><span style="color: #24292f;background-color: #f6f8fa">]</span> <span style="color: #0550ae">+</span> <span style="color: #0a3069">"</span><span style="color: #0a3069">px</span><span style="color: #0a3069">"</span><span style="color: #24292f;background-color: #f6f8fa">;</span>
	<span style="color: #24292f;background-color: #f6f8fa">elem</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">style</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">position</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">'</span><span style="color: #0a3069">absolute</span><span style="color: #0a3069">'</span><span style="color: #24292f;background-color: #f6f8fa">;</span>
	<span style="color: #24292f;background-color: #f6f8fa">j_id_id18_cal</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">render</span><span style="color: #24292f;background-color: #f6f8fa">();</span>
<span style="color: #116329">&lt;/script&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Wow!  That&#8217;s some pretty ugly markup, but what you get out of that generated mess is, in my opinion, worth it, and the user will never see that (unless he&#8217;s crazy enough to view the page source).  That mark up, by the way, is generated by this template snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="html"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span style="color: #116329">&lt;h:inputText</span> <span style="color: #116329">id=</span><span style="color: #0a3069">"test"</span> <span style="color: #116329">readonly=</span><span style="color: #0a3069">"true"</span><span style="color: #116329">/&gt;</span>
<span style="color: #116329">&lt;yuisf:calendar</span> <span style="color: #116329">textField=</span><span style="color: #0a3069">"test"</span><span style="color: #116329">/&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s break things down a little bit.   Since this tag does not support any children tags (plus the fact that it seemed like a good idea), we do all of our work in <code>encodeEnd()</code>.  After a little error checking, we get a reference to the <code>ResponseWriter</code> used to output our HTML.  The next several blocks of code handle sending the Yahoo! Javascript files to the browser (the mechanics of which are beyond the scope of this article, but feel free to browse the source).  Care is taken to prevent sending the file more than once in the event that more than one calendar is on the page.  The actual markup output occurs in <code>writeCalendarMarkUp()</code>.  I&#8217;ll not muddy the waters by explaining exactly how it works, but suffice it to say that a template is loaded from the class path and markers in the template are replaced with values from the tag (big tip of the hat to Ed, whose code I shamelessly stole).</p>
</div>
<div class="paragraph">
<p>The final piece to tieing this together is faces-config.xml:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="xml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre><span style="color: #6e7781">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span>
<span style="color: #6e7781">&lt;!DOCTYPE faces-config PUBLIC
  "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.1//EN"
  "http://java.sun.com/dtd/web-facesconfig_1_1.dtd"&gt;</span>
<span style="color: #116329">&lt;faces-config&gt;</span>
  <span style="color: #116329">&lt;component&gt;</span>
    <span style="color: #116329">&lt;description&gt;</span>
      Yahoo! UI Calendar
    <span style="color: #116329">&lt;/description&gt;</span>
    <span style="color: #116329">&lt;display-name&gt;</span>Yahoo! UI Calendar<span style="color: #116329">&lt;/display-name&gt;</span>
    <span style="color: #116329">&lt;component-type&gt;</span>com.steeplesoft.jsf.components.yui.calendar.Calendar<span style="color: #116329">&lt;/component-type&gt;</span>
    <span style="color: #116329">&lt;component-class&gt;</span>com.steeplesoft.jsf.components.yui.calendar.UICalendar<span style="color: #116329">&lt;/component-class&gt;</span>
    <span style="color: #116329">&lt;component-extension&gt;</span>
      <span style="color: #116329">&lt;renderer-type&gt;</span>CalendarRenderer<span style="color: #116329">&lt;/renderer-type&gt;</span>
    <span style="color: #116329">&lt;/component-extension&gt;</span>
  <span style="color: #116329">&lt;/component&gt;</span>
  <span style="color: #116329">&lt;render-kit&gt;</span>
    <span style="color: #116329">&lt;description&gt;</span>
    	  Renderkit implementation for the Calendar component
    <span style="color: #116329">&lt;/description&gt;</span>
    <span style="color: #116329">&lt;renderer&gt;</span>
      <span style="color: #116329">&lt;component-family&gt;</span>YuiCalendar<span style="color: #116329">&lt;/component-family&gt;</span>
      <span style="color: #116329">&lt;renderer-type&gt;</span>com.steeplesoft.jsf.components.yui.calendar.Calendar<span style="color: #116329">&lt;/renderer-type&gt;</span>
      <span style="color: #116329">&lt;renderer-class&gt;</span>com.steeplesoft.jsf.components.yui.calendar.CalendarRenderer<span style="color: #116329">&lt;/renderer-class&gt;</span>
    <span style="color: #116329">&lt;/renderer&gt;</span>
  <span style="color: #116329">&lt;/render-kit&gt;</span>
<span style="color: #116329">&lt;/faces-config&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we define both a component and a render kit.  Note that <code>component-type</code> is the same as <code>UICalendar.COMPONENT_TYPE</code>, and <code>component-class</code> is our <code>UICalendar</code> class.  For the render kit, <code>component-family</code> is what <code>UICalendar.getFamily()</code> returns (if you had a group of components that used the same renderer, each class would return the same string for its family).  The <code>renderer-type</code> is that same as <code>UICalendar.RENDERER_TYPE</code>, and, of course, <code>renderer-class</code> points to our <code>Renderer</code> child.</p>
</div>
<div class="paragraph">
<p>With all of that done, we need to package our new component.  In the component jar, you&#8217;ll obviously need the compiled Java classes, but you&#8217;ll also need the <code>META-INF</code> directory in the root of your jar (which is why I chose to put it in the root of my source directory).  You are now ready to put the resulting jar (and it&#8217;s dependencies) in your web application and start using the component.  Simple, eh? :)</p>
</div>
<div class="paragraph">
<p>While this gets a functioning component (and a pretty cool one at that), it&#8217;s certainly not feature complete, nor is it an example of how one <em>should</em> write a component.  Hopefully, though, it will get you started writing your own components as it did me.</p>
</div>
<div class="paragraph">
<p>So what&#8217;s the future of this component?  The short answer is, I&#8217;m not completely sure.  All I know is that it will be open sourced somewhere.  Discussions about where the project will live are pending, but I hope to have that nailed down pretty soon.  If nothing else, I&#8217;ll host them here.  Watch this space for more information on that.</p>
</div>
    </div>
    <footer>
        <div class="grid">
            <div class="col tags">
                
                <span class="title">tags: </span>
                
                <a href="/tag/java/">Java</a>
                <!--                <a href="https://jasondl.ee/tags/Java.html">Java</a>-->
                
                <a href="/tag/jsf/">JSF</a>
                <!--                <a href="https://jasondl.ee/tags/JSF.html">JSF</a>-->
                
                
            </div>
            <div class="col"><span class="share-page" style="">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://jasondl.ee/2006/yahoo-ui-meets-javaserver-faces&title=Yahoo! UI Meets JavaServer Faces" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <i class="fa fa-linkedin-square"></i>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=Yahoo! UI Meets JavaServer Faces&url=https://jasondl.ee/2006/yahoo-ui-meets-javaserver-faces&via=jasondlee&related=jasondlee" rel="nofollow" target="_blank" title="Share on Twitter">
      <i class="fa fa-twitter-square"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://jasondl.ee/2006/yahoo-ui-meets-javaserver-faces" rel="nofollow" target="_blank" title="Share on Facebook">
      <i class="fa fa-facebook-square"></i>
  </a>
  <a class="share-reddit" href="https://www.reddit.com/submit?url=https://jasondl.ee/2006/yahoo-ui-meets-javaserver-faces" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
      <i class="fa fa-reddit-square"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Yahoo! UI Meets JavaServer Faces&amp;body=Yahoo! UI Meets JavaServer Faces https://jasondl.ee/2006/yahoo-ui-meets-javaserver-faces" title="Share via Email" >
      <i class="fa fa-envelope"></i>
  </a>
</span>
</div>
        </div>
    </footer>
</article>

        </div>
    </div>
    <div class="col-3 widget">
        <div>
            <h3>Search</h3>
            <!-- HTML elements for search -->
            <input type="text" id="search-input" placeholder="Search blog posts.." style="width: 98%"/>
            <ul id="results-container"></ul>

            <script>
                var sjs = SimpleJekyllSearch({
                    searchInput: document.getElementById('search-input'),
                    resultsContainer: document.getElementById('results-container'),
                    json: '/search.json',
                    limit: 50
                })
            </script>
        </div>
        <div>
            <h3>Quotes</h3>
            <p id="quote">Sample quote</p>
            <p id="source">Quote source</p>
        </div>
        <div>
            <h3>About</h3>
            <p><img src="/images/profile-pic.jpg" style="float:right; object-fit: scale-down; padding-bottom: 1em;"/>My name is Jason Lee. I am a software developer living in the middle of Oklahoma. I’ve been a professional developer since 1997,
using a variety of languages, including Java, Javascript, PHP, Python, Delphi, and even a bit of C#. I currently work for Red Hat
on the WildFly/EAP team, where, among other things, I maintain integrations for some MicroProfile specs, OpenTelemetry, Micrometer,
Jakarta Faces, and Bean Validation. (Full resume <a href="resume">here</a>.
LinkedIn <a href="https://www.linkedin.com/in/jasondlee">profile</a>)</p>

<p>I am the president of the Oklahoma City JUG, and an occasional speaker at the JUG and a variety of technical conferences.</p>

<p>On the personal side, I’m active in my church, and enjoy bass guitar, running, fishing, and a variety of martial arts. I’m also
married to a beautiful woman, and have two boys, who, thankfully, look like their mother.</p>

        </div>
        <div>
            <h3>My Links</h3>
            <ul>
                
                <li>
                    <a href="/presentations" title="Presentations">
                        Presentations
                    </a>
                </li>
                
                <li>
                    <a href="/assets/resume.pdf" title="Resume/CV">
                        Resume/CV
                    </a>
                </li>
                
                <li>
                    <a href="https://linkedin.com/in/jasondlee" title="LinkedIn">
                        LinkedIn
                    </a>
                </li>
                
                <li>
                    <a href="https://twitter.com/jasondlee" title="Twitter">
                        Twitter
                    </a>
                </li>
                
                <li>
                    <a href="https://mastodon.cloud/@jasondlee" title="Mastodon">
                        Mastodon
                    </a>
                </li>
                
                <li>
                    <a href="/tag" title="Tags">
                        Tags
                    </a>
                </li>
                
            </ul>

        </div>
        <div>
            <h3>Publications</h3>
            <ul>
                <li>
                    <div class="grid">
                        <div class="col-8" style="text-weight: bold; font-size: large">
                            <div>Java 9 Programming Blueprints:</div>
                            <div>
                                <a title="My Java 9 book at Amazon" href="https://amzn.to/2FD2XAo" style="padding-left: 10px">Amazon</a>
                            </div>
                            <div>
                                <a title="My Java 9 book at Packt"
                                   href="https://www.packtpub.com/application-development/java-9-programming-blueprints"
                                   style="padding-left: 10px">Packt</a>
                            </div>
                        </div>
                            <div class="col-4">
                                <a href="https://amzn.to/2FD2XAo"><img src="/images/2017/j9pb.png" width="100"/></a>
                            </div>
                    </div>
                </li>
                
                <li>
                    <a href="https://jaxenter.com/tips-for-writing-pluggable-java-ee-applications-105281.html" title="This article discusses ways to use Java EE specs to implement a simple, yet powerful plugin system with a minimum of thrid party libraries.">
                        Tips for Writing Pluggable Java EE Applications
                    </a>
                </li>
                
                <li>
                    <a href="http://www.oracle.com/technetwork/articles/javaee/jsf-templating-137822.html" title="An article Ken Paulsen and I wrote detailing easy JSF component creation">
                        JSFTemplating and Woodstock: Component Authoring Made Easy
                    </a>
                </li>
                
                <li>
                    <a href="http://jsfcentral.com/articles/lee-03-09.html" title="Jason Lee in depth: Mojarra and Scales">
                        Jason Lee in depth: Mojarra and Scales
                    </a>
                </li>
                
                <li>
                    <a href="https://web.archive.org/web/20090301060746/http://www.theserverside.com/news/thread.tss?thread_id=49343" title="My JavaOne 2008 Wrap Up">
                        Jason Lee: Postmortem for JavaOne 2008
                    </a>
                </li>
                
                <li>
                    <a href="https://web.archive.org/web/20130621192312/https://blogs.oracle.com/stories/entry/international_environmental" title="The GlassFish Adoption Story from my time at IEC">
                        International Environmental: A Cooling Company Which Prefers Hot Software
                    </a>
                </li>
                
                <li>
                    <a href="http://www.jsfcentral.com/articles/trenches_7.html" title="This details the project that spawned a couple of the Mojarra Scales components">
                        IEC donates custom JSF component to Mojarra Scales
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
<div class="footer">
    <div>
        <p>&#169; Copyright Jason Lee, 2005-2023. All rights reserved.</p>
    </div>
</div>
<!--
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-1091049-6', 'auto');
    ga('send', 'pageview');
</script>
-->
<script src="/assets/js/quotes.js" type="text/javascript"></script>
<script src="/assets/js/local.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
<script type="text/javascript" src="/assets/js/copy.js"></script>
</body>
</html>
