<!DOCTYPE html>
<html>
<head>
    <title>Coming Up for Air : JSF, PhaseListeners, and GET Requests</title>

    <script src="/assets/js/simple-jekyll-search.min.js" type="text/javascript"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3GQK1YDRQM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-3GQK1YDRQM');
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="me" href="https://mastodon.cloud/@jasondlee"/>

    <link rel="alternate" type="application/rss+xml" title="jasondl.ee RSS feed" href="/feed.xml">

    <link rel="stylesheet" href="/assets/css/main.css" />

    <!-- Web Fonts -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Cherry+Cream+Soda">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Philosopher">
    <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css"/>

    <link rel="stylesheet" href="https://unpkg.com/primeflex@3.1.2/primeflex.css"/>
    <link rel="stylesheet" href="https://unpkg.com/primeflex/themes/saga-blue.css"/>
    <link rel="author" href="/images/profile-pic.jpg"/>
</head>
<body>
<div class="grid">
    <div class="col blogname">
        <span>
            <a href="https://jasondl.ee">Coming Up for Air</a>
        </span>
    </div>
</div>
<div class="grid main">
    <div class="col-9">
        <div id="content">
            <article class="post">
    <h1 class="title" style="border-bottom: solid 1px #47586d; margin-bottom: 0.25rem;">
        JSF, PhaseListeners, and GET Requests
    </h1>
    Tuesday, April 25, 2006 | <span class="share-page" style="">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://jasondl.ee/2006/jsf-phaselisteners-and-get-requests&title=JSF, PhaseListeners, and GET Requests" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <i class="fa fa-linkedin-square"></i>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=JSF, PhaseListeners, and GET Requests&url=https://jasondl.ee/2006/jsf-phaselisteners-and-get-requests&via=jasondlee&related=jasondlee" rel="nofollow" target="_blank" title="Share on Twitter">
      <i class="fa fa-twitter-square"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://jasondl.ee/2006/jsf-phaselisteners-and-get-requests" rel="nofollow" target="_blank" title="Share on Facebook">
      <i class="fa fa-facebook-square"></i>
  </a>
  <a class="share-reddit" href="https://www.reddit.com/submit?url=https://jasondl.ee/2006/jsf-phaselisteners-and-get-requests" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
      <i class="fa fa-reddit-square"></i>
  </a>
  <a class="share-email" href="mailto:?subject=JSF, PhaseListeners, and GET Requests&amp;body=JSF, PhaseListeners, and GET Requests https://jasondl.ee/2006/jsf-phaselisteners-and-get-requests" title="Share via Email" >
      <i class="fa fa-envelope"></i>
  </a>
</span>

    <div>
        <div class="paragraph">
<p><strong>UPDATE:</strong>  For a missing piece of code, please see this <a href="/2006/05/08/facesutil-a-missing-yet-important-piece">entry</a>.</p>
</div>
<div class="paragraph">
<p>In one of our applications at work, we needed to be able to deep link to certain pages to allow external applications to get at specific pieces of data, product and order information to be specific.  Since JSF 1.x does not support HTTP GET requests, this poses a problem.  In order to get (no pun intended) information to the backing bean for processing, the data would have to be POSTed.  This obviously makes bookmarking the resulting page useless.  Our initial solution was to write a servlet filter which would get a reference to the current FacesContext, then get a reference to the appropriate JSF managed bean, and pump data into it.  This actually worked rather well, but, at Ed Burns' suggestion, I decided to reimplement this a JSF PhaseListener (many thanks to Ryan Lubke for his help!).  A PhaseListener is "an interface implemented by objects that wish to be notified at the beginning and ending of processing for each standard phase of the request processing lifecycle."</p>
</div>
<div class="paragraph">
<p>At any rate, what I was able to do is register a PhaseListener to execute on the RESTORE VIEW phase (for a GET request, the only two phases that run are the RESTORE VIEW and RENDER RESPONSE phases).  In a nut shell, what the beforePhase() method does is this:
* Get the Request URI and break it into parts.  The URI is expected to be in the format /Context/application/parm1/parm2/parm3/&#8230;&#8203;
* The "application" is extracted from the URI, and the rest is passed off to the appropriate handler
* Inside the handler, a reference to the managed bean for the "application" is retrieved from the FacesContext
* As appropriate for each handler, data is pulled from the URI and injected, via setters, into the managed bean
* The ViewRoot is set for the appropriate output page.  If this is not done, the server will return a 404, as /Context/application does not exist on the filesystem.
* The method returns, as does beforePhase(), and the lifecycle is completed.</p>
</div>
<div class="paragraph">
<p>What comes out the other end is the expected pages, just as if someone had filled out a form and clicked submit.  It&#8217;s really quite nifty.   Of course, all of that is pretty tough to follow with out some code, so here we go.  First, let&#8217;s register the PhaseListener:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="xml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span style="color: #116329">&lt;lifecycle&gt;</span>
    <span style="color: #116329">&lt;phase-listener&gt;</span>
        com.iecokc.gopher.view.util.PrettyUrlPhaseListener
    <span style="color: #116329">&lt;/phase-listener&gt;</span>
<span style="color: #116329">&lt;/lifecycle&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, let&#8217;s look at the PhaseListener itself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
</pre></td><td class="code"><pre><span style="color: #cf222e">public</span> <span style="color: #cf222e">class</span> <span style="color: #953800">PrettyUrlPhaseListener</span> <span style="color: #cf222e">implements</span> <span style="color: #953800">PhaseListener</span> <span style="color: #0550ae">{</span>
    <span style="color: #cf222e">private</span> <span style="color: #cf222e">static</span> <span style="color: #cf222e">final</span> <span style="color: #953800">Log</span> <span style="color: #24292f;background-color: #f6f8fa">logger</span> <span style="color: #0550ae">=</span>
        <span style="color: #953800">LogFactory</span><span style="color: #0550ae">.</span><span style="color: #116329">getLog</span><span style="color: #0550ae">(</span><span style="color: #953800">PrettyUrlPhaseListener</span><span style="color: #0550ae">.</span><span style="color: #116329">class</span><span style="color: #0550ae">);</span>
    <span style="color: #953800">FacesContext</span> <span style="color: #24292f;background-color: #f6f8fa">context</span> <span style="color: #0550ae">=</span>  <span style="color: #0550ae">null</span><span style="color: #0550ae">;</span>
    <span style="color: #cf222e">public</span> <span style="color: #953800">PhaseId</span> <span style="color: #8250df">getPhaseId</span><span style="color: #0550ae">()</span> <span style="color: #0550ae">{</span>
        <span style="color: #cf222e">return</span> <span style="color: #953800">PhaseId</span><span style="color: #0550ae">.</span><span style="color: #116329">RESTORE_VIEW</span><span style="color: #0550ae">;</span>
    <span style="color: #0550ae">}</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">beforePhase</span><span style="color: #0550ae">(</span><span style="color: #953800">PhaseEvent</span> <span style="color: #24292f;background-color: #f6f8fa">e</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
        <span style="color: #953800">PhaseId</span> <span style="color: #24292f;background-color: #f6f8fa">phase</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">e</span><span style="color: #0550ae">.</span><span style="color: #116329">getPhaseId</span><span style="color: #0550ae">();</span>
        <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">phase</span> <span style="color: #0550ae">==</span> <span style="color: #953800">PhaseId</span><span style="color: #0550ae">.</span><span style="color: #116329">RESTORE_VIEW</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
            <span style="color: #cf222e">try</span> <span style="color: #0550ae">{</span>
                <span style="color: #24292f;background-color: #f6f8fa">context</span> <span style="color: #0550ae">=</span> <span style="color: #953800">FacesContext</span><span style="color: #0550ae">.</span><span style="color: #116329">getCurrentInstance</span><span style="color: #0550ae">();</span>
                <span style="color: #953800">HttpServletRequest</span> <span style="color: #24292f;background-color: #f6f8fa">request</span> <span style="color: #0550ae">=</span> <span style="color: #0550ae">(</span><span style="color: #953800">HttpServletRequest</span><span style="color: #0550ae">)</span>
                    <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">.</span><span style="color: #116329">getExternalContext</span><span style="color: #0550ae">().</span><span style="color: #116329">getRequest</span><span style="color: #0550ae">();</span>
                <span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">uri</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">request</span><span style="color: #0550ae">.</span><span style="color: #116329">getRequestURI</span><span style="color: #0550ae">();</span>
                <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">uri</span> <span style="color: #0550ae">!=</span> <span style="color: #0550ae">null</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
                    <span style="color: #6e7781">// Split the URI by / to get its  component parts</span>
                    <span style="color: #953800">String</span><span style="color: #0550ae">[]</span> <span style="color: #24292f;background-color: #f6f8fa">parts</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">uri</span><span style="color: #0550ae">.</span><span style="color: #116329">split</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"\\/"</span><span style="color: #0550ae">);</span>
                    <span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">application</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">[</span><span style="color: #0550ae">2</span><span style="color: #0550ae">];</span>
                    <span style="color: #6e7781">// This PhaseListener knows about two "applications",</span>
                    <span style="color: #6e7781">// product lookup, and the cleverly titled, Dude</span>
                    <span style="color: #6e7781">// Where's My Order</span>
                    <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #0a3069">"product"</span><span style="color: #0550ae">.</span><span style="color: #116329">equals</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">application</span><span style="color: #0550ae">))</span> <span style="color: #0550ae">{</span>
                        <span style="color: #24292f;background-color: #f6f8fa">handleProductLookups</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">);</span>
                    <span style="color: #0550ae">}</span> <span style="color: #cf222e">else</span> <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #0a3069">"dwmo"</span><span style="color: #0550ae">.</span><span style="color: #116329">equals</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">application</span><span style="color: #0550ae">))</span> <span style="color: #0550ae">{</span>
                        <span style="color: #24292f;background-color: #f6f8fa">handleDudeWheresMyOrder</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">);</span>
                    <span style="color: #0550ae">}</span>
                <span style="color: #0550ae">}</span>
            <span style="color: #0550ae">}</span> <span style="color: #cf222e">catch</span> <span style="color: #0550ae">(</span><span style="color: #953800">Exception</span> <span style="color: #24292f;background-color: #f6f8fa">ex</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
                <span style="color: #24292f;background-color: #f6f8fa">logger</span><span style="color: #0550ae">.</span><span style="color: #116329">error</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">ex</span><span style="color: #0550ae">.</span><span style="color: #116329">getMessage</span><span style="color: #0550ae">());</span>
                <span style="color: #24292f;background-color: #f6f8fa">ex</span><span style="color: #0550ae">.</span><span style="color: #116329">printStackTrace</span><span style="color: #0550ae">();</span>
            <span style="color: #0550ae">}</span>
        <span style="color: #0550ae">}</span>
    <span style="color: #0550ae">}</span>
    <span style="color: #cf222e">protected</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">handleProductLookups</span><span style="color: #0550ae">(</span><span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">[])</span> <span style="color: #0550ae">{</span>
        <span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">partNumber</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">""</span><span style="color: #0550ae">;</span>
        <span style="color: #6e7781">// If there aren't enough parts to complete the request, redirect</span>
        <span style="color: #6e7781">// to the product home page</span>
        <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">.</span><span style="color: #116329">length</span> <span style="color: #0550ae">!=</span> <span style="color: #0550ae">5</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
            <span style="color: #6e7781">// There's no way to determine what this should be</span>
            <span style="color: #6e7781">// programmitcally, so we'll hardcode the value here (and in</span>
            <span style="color: #6e7781">// handleDudeWheresMyOrder()).</span>
            <span style="color: #6e7781">// Be careful to note that we say .jsp and not .jsf, or you'll</span>
            <span style="color: #6e7781">// get a nasty recursion error.</span>
            <span style="color: #953800">UIViewRoot</span> <span style="color: #24292f;background-color: #f6f8fa">view</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">.</span><span style="color: #116329">getApplication</span><span style="color: #0550ae">().</span><span style="color: #116329">getViewHandler</span><span style="color: #0550ae">().</span>
                <span style="color: #24292f;background-color: #f6f8fa">createView</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span><span style="color: #0a3069">"/productViewHome.jsp"</span><span style="color: #0550ae">);</span>
            <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">.</span><span style="color: #116329">setViewRoot</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">view</span><span style="color: #0550ae">);</span>
        <span style="color: #0550ae">}</span> <span style="color: #cf222e">else</span> <span style="color: #0550ae">{</span>
            <span style="color: #cf222e">try</span> <span style="color: #0550ae">{</span>
                <span style="color: #24292f;background-color: #f6f8fa">partNumber</span> <span style="color: #0550ae">=</span> <span style="color: #953800">URLDecoder</span><span style="color: #0550ae">.</span><span style="color: #116329">decode</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">[</span><span style="color: #0550ae">3</span><span style="color: #0550ae">],</span>
                    <span style="color: #953800">Charset</span><span style="color: #0550ae">.</span><span style="color: #116329">defaultCharset</span><span style="color: #0550ae">().</span><span style="color: #116329">displayName</span><span style="color: #0550ae">());</span>
                <span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">tab</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">[</span><span style="color: #0550ae">4</span><span style="color: #0550ae">];</span>
                <span style="color: #953800">UIViewRoot</span> <span style="color: #24292f;background-color: #f6f8fa">view</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">.</span><span style="color: #116329">getApplication</span><span style="color: #0550ae">().</span>
                    <span style="color: #24292f;background-color: #f6f8fa">getViewHandler</span><span style="color: #0550ae">().</span>
                    <span style="color: #24292f;background-color: #f6f8fa">createView</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span><span style="color: #0a3069">"/productViewResults.jsp"</span><span style="color: #0550ae">);</span>
                <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">.</span><span style="color: #116329">setViewRoot</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">view</span><span style="color: #0550ae">);</span>
                <span style="color: #953800">ProductViewBean</span> <span style="color: #24292f;background-color: #f6f8fa">bean</span> <span style="color: #0550ae">=</span> <span style="color: #0550ae">(</span><span style="color: #953800">ProductViewBean</span><span style="color: #0550ae">)</span>
                    <span style="color: #953800">FacesUtils</span><span style="color: #0550ae">.</span><span style="color: #116329">getManagedBean</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"pvForm"</span><span style="color: #0550ae">);</span>
                <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">tab</span> <span style="color: #0550ae">!=</span> <span style="color: #0550ae">null</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
                    <span style="color: #24292f;background-color: #f6f8fa">bean</span><span style="color: #0550ae">.</span><span style="color: #116329">setTab</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">tab</span><span style="color: #0550ae">);</span>
                <span style="color: #0550ae">}</span>
                <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">partNumber</span> <span style="color: #0550ae">!=</span> <span style="color: #0550ae">null</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
                    <span style="color: #24292f;background-color: #f6f8fa">bean</span><span style="color: #0550ae">.</span><span style="color: #116329">setPartNumber</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">partNumber</span><span style="color: #0550ae">);</span>
                <span style="color: #0550ae">}</span>
            <span style="color: #0550ae">}</span> <span style="color: #cf222e">catch</span> <span style="color: #0550ae">(</span><span style="color: #953800">UnsupportedEncodingException</span> <span style="color: #24292f;background-color: #f6f8fa">ex</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
                <span style="color: #24292f;background-color: #f6f8fa">ex</span><span style="color: #0550ae">.</span><span style="color: #116329">printStackTrace</span><span style="color: #0550ae">();</span>
            <span style="color: #0550ae">}</span>
        <span style="color: #0550ae">}</span>
    <span style="color: #0550ae">}</span>
    <span style="color: #cf222e">protected</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">handleDudeWheresMyOrder</span><span style="color: #0550ae">(</span><span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">[])</span> <span style="color: #0550ae">{</span>
        <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">.</span><span style="color: #116329">length</span> <span style="color: #0550ae">!=</span> <span style="color: #0550ae">5</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
            <span style="color: #953800">UIViewRoot</span> <span style="color: #24292f;background-color: #f6f8fa">view</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">.</span><span style="color: #116329">getApplication</span><span style="color: #0550ae">().</span>
                <span style="color: #24292f;background-color: #f6f8fa">getViewHandler</span><span style="color: #0550ae">().</span><span style="color: #116329">createView</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span><span style="color: #0a3069">"/dwmoHome.jsp"</span><span style="color: #0550ae">);</span>
            <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">.</span><span style="color: #116329">setViewRoot</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">view</span><span style="color: #0550ae">);</span>
        <span style="color: #0550ae">}</span> <span style="color: #cf222e">else</span> <span style="color: #0550ae">{</span>
            <span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">orderNumber</span> <span style="color: #0550ae">=</span> <span style="color: #0a3069">""</span><span style="color: #0550ae">;</span>
            <span style="color: #cf222e">try</span> <span style="color: #0550ae">{</span>
                <span style="color: #24292f;background-color: #f6f8fa">orderNumber</span> <span style="color: #0550ae">=</span> <span style="color: #953800">URLDecoder</span><span style="color: #0550ae">.</span><span style="color: #116329">decode</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">[</span><span style="color: #0550ae">3</span><span style="color: #0550ae">],</span>
                    <span style="color: #953800">Charset</span><span style="color: #0550ae">.</span><span style="color: #116329">defaultCharset</span><span style="color: #0550ae">().</span><span style="color: #116329">displayName</span><span style="color: #0550ae">());</span>
                <span style="color: #953800">String</span> <span style="color: #24292f;background-color: #f6f8fa">tab</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">parts</span><span style="color: #0550ae">[</span><span style="color: #0550ae">4</span><span style="color: #0550ae">];</span>
                <span style="color: #953800">UIViewRoot</span> <span style="color: #24292f;background-color: #f6f8fa">view</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">.</span><span style="color: #116329">getApplication</span><span style="color: #0550ae">().</span>
                    <span style="color: #24292f;background-color: #f6f8fa">getViewHandler</span><span style="color: #0550ae">().</span>
                    <span style="color: #24292f;background-color: #f6f8fa">createView</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">,</span><span style="color: #0a3069">"/dwmoResults.jsp"</span><span style="color: #0550ae">);</span>
                <span style="color: #24292f;background-color: #f6f8fa">context</span><span style="color: #0550ae">.</span><span style="color: #116329">setViewRoot</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">view</span><span style="color: #0550ae">);</span>
                <span style="color: #953800">DudeWheresMyOrderBean</span> <span style="color: #24292f;background-color: #f6f8fa">bean</span> <span style="color: #0550ae">=</span> <span style="color: #0550ae">(</span><span style="color: #953800">DudeWheresMyOrderBean</span><span style="color: #0550ae">)</span>
                    <span style="color: #953800">FacesUtils</span><span style="color: #0550ae">.</span><span style="color: #116329">getManagedBean</span><span style="color: #0550ae">(</span><span style="color: #0a3069">"dwmoForm"</span><span style="color: #0550ae">);</span>
                <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">tab</span> <span style="color: #0550ae">!=</span> <span style="color: #0550ae">null</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
                    <span style="color: #24292f;background-color: #f6f8fa">bean</span><span style="color: #0550ae">.</span><span style="color: #116329">setTab</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">tab</span><span style="color: #0550ae">);</span>
                <span style="color: #0550ae">}</span>
                <span style="color: #cf222e">if</span> <span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">orderNumber</span> <span style="color: #0550ae">!=</span> <span style="color: #0550ae">null</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
                    <span style="color: #24292f;background-color: #f6f8fa">bean</span><span style="color: #0550ae">.</span><span style="color: #116329">setOrderNumber</span><span style="color: #0550ae">(</span><span style="color: #24292f;background-color: #f6f8fa">orderNumber</span><span style="color: #0550ae">);</span>
                <span style="color: #0550ae">}</span>
            <span style="color: #0550ae">}</span> <span style="color: #cf222e">catch</span> <span style="color: #0550ae">(</span><span style="color: #953800">UnsupportedEncodingException</span> <span style="color: #24292f;background-color: #f6f8fa">ex</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
                <span style="color: #24292f;background-color: #f6f8fa">ex</span><span style="color: #0550ae">.</span><span style="color: #116329">printStackTrace</span><span style="color: #0550ae">();</span>
            <span style="color: #0550ae">}</span>
        <span style="color: #0550ae">}</span>
    <span style="color: #0550ae">}</span>
    <span style="color: #cf222e">public</span> <span style="color: #cf222e">void</span> <span style="color: #8250df">afterPhase</span><span style="color: #0550ae">(</span><span style="color: #953800">PhaseEvent</span> <span style="color: #24292f;background-color: #f6f8fa">e</span><span style="color: #0550ae">)</span> <span style="color: #0550ae">{</span>
        <span style="color: #6e7781">// We don't care about this</span>
    <span style="color: #0550ae">}</span>
<span style="color: #0550ae">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>There&#8217;s one more step.  Currently, our application is only configured to map *.jsf to the FacesServlet, so we&#8217;ll need to add a couple more mappings to make our "virtual" URLs work.  This goes in web.xml:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="xml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span style="color: #116329">&lt;servlet-mapping&gt;</span>
    <span style="color: #116329">&lt;servlet-name&gt;</span>Faces Servlet<span style="color: #116329">&lt;/servlet-name&gt;</span>
    <span style="color: #116329">&lt;url-pattern&gt;</span>/product/*<span style="color: #116329">&lt;/url-pattern&gt;</span>
<span style="color: #116329">&lt;/servlet-mapping&gt;</span>
<span style="color: #116329">&lt;servlet-mapping&gt;</span>
    <span style="color: #116329">&lt;servlet-name&gt;</span>Faces Servlet<span style="color: #116329">&lt;/servlet-name&gt;</span>
    <span style="color: #116329">&lt;url-pattern&gt;</span>/dwmo/*<span style="color: #116329">&lt;/url-pattern&gt;</span>
<span style="color: #116329">&lt;/servlet-mapping&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you had the rest of our code, you should now be able to deploy the web page and point your browser at <code>/Context/product/ABC123/tab</code> and learn all about one of our products. :) Since you don&#8217;t have the rest of the app, you obviously can&#8217;t do that, but hopefully I&#8217;ve provided enough information for you to implement a similar solution.</p>
</div>
<div class="paragraph">
<p>As always, any comments and enhancements are much appreciated.</p>
</div>
    </div>
    <footer>
        <div class="grid">
            <div class="col tags">
                
                <span class="title">tags: </span>
                
                <a href="/tag/jsf/">JSF</a>
                <!--                <a href="https://jasondl.ee/tags/JSF.html">JSF</a>-->
                
                
            </div>
            <div class="col"><span class="share-page" style="">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://jasondl.ee/2006/jsf-phaselisteners-and-get-requests&title=JSF, PhaseListeners, and GET Requests" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <i class="fa fa-linkedin-square"></i>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=JSF, PhaseListeners, and GET Requests&url=https://jasondl.ee/2006/jsf-phaselisteners-and-get-requests&via=jasondlee&related=jasondlee" rel="nofollow" target="_blank" title="Share on Twitter">
      <i class="fa fa-twitter-square"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://jasondl.ee/2006/jsf-phaselisteners-and-get-requests" rel="nofollow" target="_blank" title="Share on Facebook">
      <i class="fa fa-facebook-square"></i>
  </a>
  <a class="share-reddit" href="https://www.reddit.com/submit?url=https://jasondl.ee/2006/jsf-phaselisteners-and-get-requests" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
      <i class="fa fa-reddit-square"></i>
  </a>
  <a class="share-email" href="mailto:?subject=JSF, PhaseListeners, and GET Requests&amp;body=JSF, PhaseListeners, and GET Requests https://jasondl.ee/2006/jsf-phaselisteners-and-get-requests" title="Share via Email" >
      <i class="fa fa-envelope"></i>
  </a>
</span>
</div>
        </div>
    </footer>
</article>

        </div>
    </div>
    <div class="col-3 widget">
        <div>
            <h3>Search</h3>
            <!-- HTML elements for search -->
            <input type="text" id="search-input" placeholder="Search blog posts.." style="width: 98%"/>
            <ul id="results-container"></ul>

            <script>
                var sjs = SimpleJekyllSearch({
                    searchInput: document.getElementById('search-input'),
                    resultsContainer: document.getElementById('results-container'),
                    json: '/search.json',
                    limit: 50
                })
            </script>
        </div>
        <div>
            <h3>Quotes</h3>
            <p id="quote">Sample quote</p>
            <p id="source">Quote source</p>
        </div>
        <div>
            <h3>About</h3>
            <p><img src="/images/profile-pic.jpg" style="float:right; object-fit: scale-down; padding-bottom: 1em;"/>My name is Jason Lee. I am a software developer living in the middle of Oklahoma. I’ve been a professional developer since 1997,
using a variety of languages, including Java, Javascript, PHP, Python, Delphi, and even a bit of C#. I currently work for Red Hat
on the WildFly/EAP team, where, among other things, I maintain integrations for some MicroProfile specs, OpenTelemetry, Micrometer,
Jakarta Faces, and Bean Validation. (Full resume <a href="resume">here</a>.
LinkedIn <a href="https://www.linkedin.com/in/jasondlee">profile</a>)</p>

<p>I am the president of the Oklahoma City JUG, and an occasional speaker at the JUG and a variety of technical conferences.</p>

<p>On the personal side, I’m active in my church, and enjoy bass guitar, running, fishing, and a variety of martial arts. I’m also
married to a beautiful woman, and have two boys, who, thankfully, look like their mother.</p>

        </div>
        <div>
            <h3>My Links</h3>
            <ul>
                
                <li>
                    <a href="/presentations" title="Presentations">
                        Presentations
                    </a>
                </li>
                
                <li>
                    <a href="/assets/resume.pdf" title="Resume/CV">
                        Resume/CV
                    </a>
                </li>
                
                <li>
                    <a href="https://linkedin.com/in/jasondlee" title="LinkedIn">
                        LinkedIn
                    </a>
                </li>
                
                <li>
                    <a href="https://twitter.com/jasondlee" title="Twitter">
                        Twitter
                    </a>
                </li>
                
                <li>
                    <a href="https://mastodon.cloud/@jasondlee" title="Mastodon">
                        Mastodon
                    </a>
                </li>
                
                <li>
                    <a href="/tag" title="Tags">
                        Tags
                    </a>
                </li>
                
            </ul>

        </div>
        <div>
            <h3>Publications</h3>
            <ul>
                <li>
                    <div class="grid">
                        <div class="col-8" style="text-weight: bold; font-size: large">
                            <div>Java 9 Programming Blueprints:</div>
                            <div>
                                <a title="My Java 9 book at Amazon" href="https://amzn.to/2FD2XAo" style="padding-left: 10px">Amazon</a>
                            </div>
                            <div>
                                <a title="My Java 9 book at Packt"
                                   href="https://www.packtpub.com/application-development/java-9-programming-blueprints"
                                   style="padding-left: 10px">Packt</a>
                            </div>
                        </div>
                            <div class="col-4">
                                <a href="https://amzn.to/2FD2XAo"><img src="/images/2017/j9pb.png" width="100"/></a>
                            </div>
                    </div>
                </li>
                
                <li>
                    <a href="https://jaxenter.com/tips-for-writing-pluggable-java-ee-applications-105281.html" title="This article discusses ways to use Java EE specs to implement a simple, yet powerful plugin system with a minimum of thrid party libraries.">
                        Tips for Writing Pluggable Java EE Applications
                    </a>
                </li>
                
                <li>
                    <a href="http://www.oracle.com/technetwork/articles/javaee/jsf-templating-137822.html" title="An article Ken Paulsen and I wrote detailing easy JSF component creation">
                        JSFTemplating and Woodstock: Component Authoring Made Easy
                    </a>
                </li>
                
                <li>
                    <a href="http://jsfcentral.com/articles/lee-03-09.html" title="Jason Lee in depth: Mojarra and Scales">
                        Jason Lee in depth: Mojarra and Scales
                    </a>
                </li>
                
                <li>
                    <a href="https://web.archive.org/web/20090301060746/http://www.theserverside.com/news/thread.tss?thread_id=49343" title="My JavaOne 2008 Wrap Up">
                        Jason Lee: Postmortem for JavaOne 2008
                    </a>
                </li>
                
                <li>
                    <a href="https://web.archive.org/web/20130621192312/https://blogs.oracle.com/stories/entry/international_environmental" title="The GlassFish Adoption Story from my time at IEC">
                        International Environmental: A Cooling Company Which Prefers Hot Software
                    </a>
                </li>
                
                <li>
                    <a href="http://www.jsfcentral.com/articles/trenches_7.html" title="This details the project that spawned a couple of the Mojarra Scales components">
                        IEC donates custom JSF component to Mojarra Scales
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
<div class="footer">
    <div>
        <p>&#169; Copyright Jason Lee, 2005-2023. All rights reserved.</p>
    </div>
</div>
<!--
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-1091049-6', 'auto');
    ga('send', 'pageview');
</script>
-->
<script src="/assets/js/quotes.js" type="text/javascript"></script>
<script src="/assets/js/local.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
<script type="text/javascript" src="/assets/js/copy.js"></script>
</body>
</html>
