<!DOCTYPE html>
<html>
<head>
    <title>Coming Up for Air : Setting Up an Awestruct-based Blog</title>

    <script src="/assets/js/simple-jekyll-search.min.js" type="text/javascript"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3GQK1YDRQM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-3GQK1YDRQM');
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="me" href="https://mastodon.cloud/@jasondlee"/>

    <link rel="alternate" type="application/rss+xml" title="jasondl.ee RSS feed" href="/feed.xml">

    <link rel="stylesheet" href="/assets/css/main.css" />

    <!-- Web Fonts -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Cherry+Cream+Soda">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Philosopher">
    <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css"/>

    <link rel="stylesheet" href="https://unpkg.com/primeflex@3.1.2/primeflex.css"/>
    <link rel="stylesheet" href="https://unpkg.com/primeflex/themes/saga-blue.css"/>
    <link rel="author" href="/images/profile-pic.jpg"/>
</head>
<body>
<div class="grid">
    <div class="col blogname">
        <span>
            <a href="https://jasondl.ee">Coming Up for Air</a>
        </span>
    </div>
</div>
<div class="grid main">
    <div class="col-9">
        <div id="content">
            <article class="post">
    <h1 class="title" style="border-bottom: solid 1px #47586d; margin-bottom: 0.25rem;">
        Setting Up an Awestruct-based Blog
    </h1>
    Friday, April 19, 2013 | <span class="share-page" style="">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://jasondl.ee/2013/Setting-Up-an-Awestruct-based-Blog&title=Setting Up an Awestruct-based Blog" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <i class="fa fa-linkedin-square"></i>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=Setting Up an Awestruct-based Blog&url=https://jasondl.ee/2013/Setting-Up-an-Awestruct-based-Blog&via=jasondlee&related=jasondlee" rel="nofollow" target="_blank" title="Share on Twitter">
      <i class="fa fa-twitter-square"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://jasondl.ee/2013/Setting-Up-an-Awestruct-based-Blog" rel="nofollow" target="_blank" title="Share on Facebook">
      <i class="fa fa-facebook-square"></i>
  </a>
  <a class="share-reddit" href="https://www.reddit.com/submit?url=https://jasondl.ee/2013/Setting-Up-an-Awestruct-based-Blog" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
      <i class="fa fa-reddit-square"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Setting Up an Awestruct-based Blog&amp;body=Setting Up an Awestruct-based Blog https://jasondl.ee/2013/Setting-Up-an-Awestruct-based-Blog" title="Share via Email" >
      <i class="fa fa-envelope"></i>
  </a>
</span>

    <div>
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In case you missed the <a href="/posts/2013-04-15-farewell-wordpress">announcement</a>, I recently migrated my blog from Wordpress to Awestruct, the static site generation tool written by several JBoss engineers. As can be expected with a tool this new, there were some bumps and bruises along the way, but I managed&#8201;&#8212;&#8201;with lots of help&#8201;&#8212;&#8201;to make it to production with my efforts. To be a good open source citizen, then, I thought I&#8217;d explain my process and try to pass on what I learned.</p>
</div>
<div class="paragraph">
<p>The first step is, of course, installing Awestruct, which is pretty simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span style="color: #0550ae">$ </span>gem <span style="color: #953800">install </span>awestruct
<span style="color: #0550ae">$ </span>awestruct <span style="color: #116329">-i</span> <span style="color: #116329">-f</span> bootstrap
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>That will install Awestruct and bootstrap your site.  The "bootstrap" used in the command line tells Awestruct to use the bootstrap javascript framework. The other options are 'blueprint' and '960'.  I honestly can&#8217;t tell you what the differences are. I think I used blueprint, which seems to be the smallest starting point.</p>
</div>
<div class="paragraph">
<p>Once that&#8217;s done, I would suggest deleting all of the <code>.haml</code> files. HAML seems to be Awestruct&#8217;s default/preferred markup language, but it seems "everyone" is moving toward slim. We&#8217;ll see what that looks like below.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configsite-yml">_config/site.yml</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s start with the <code>_config/site.yml</code>. Something like this seems to be pretty common:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="yaml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td><td class="code"><pre><span style="color: #116329">title</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">My Blog</span>
<span style="color: #116329">author</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">Jason Lee</span>
<span style="color: #116329">local_tz</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">America/Chicago</span>
<span style="color: #116329">interpolate</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0550ae">false</span>
<span style="color: #116329">disqus</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">myblog.com</span>
<span style="color: #116329">base_url</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">http://localhost:1234</span>

<span style="color: #116329">asciidoctor</span><span style="color: #24292f;background-color: #f6f8fa">:</span>
  <span style="color: #116329">:compact</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0550ae">true</span>
  <span style="color: #116329">:eruby</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">erubis</span>
  <span style="color: #116329">:attributes</span><span style="color: #24292f;background-color: #f6f8fa">:</span>
    <span style="color: #116329">idprefix</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">'</span><span style="color: #0a3069">'</span>
    <span style="color: #116329">idseparator</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">'</span><span style="color: #0a3069">-'</span>

<span style="color: #116329">scss</span><span style="color: #24292f;background-color: #f6f8fa">:</span>
  <span style="color: #116329">:line_numbers</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0550ae">true</span>
  <span style="color: #116329">:style</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">:expanded</span>
<span style="color: #6e7781"># if no profile is specified, the first with a deploy config is selected</span>
<span style="color: #116329">profiles</span><span style="color: #24292f;background-color: #f6f8fa">:</span>
  <span style="color: #116329">development</span><span style="color: #24292f;background-color: #f6f8fa">:</span>
    <span style="color: #116329">minify</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0550ae">false</span>
    <span style="color: #116329">disqus_developer</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0550ae">true</span>
    <span style="color: #116329">dev</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0550ae">true</span>
    <span style="color: #116329">deploy</span><span style="color: #24292f;background-color: #f6f8fa">:</span>
      <span style="color: #116329">dummy</span><span style="color: #24292f;background-color: #f6f8fa">:</span>
  <span style="color: #116329">production</span><span style="color: #24292f;background-color: #f6f8fa">:</span>
    <span style="color: #116329">base_url</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">http://www.myblog.com</span>
    <span style="color: #6e7781">#disqus_developer: false</span>
    <span style="color: #116329">google_analytics</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">UA-1234567-1</span>
    <span style="color: #116329">minify</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0550ae">true</span>
    <span style="color: #116329">deploy</span><span style="color: #24292f;background-color: #f6f8fa">:</span>
      <span style="color: #116329">host</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">user@myblog.com</span>
      <span style="color: #116329">path</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">/home/user/path/to/site</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>A lot of these properties should be self-explantory, so I&#8217;ll only discuss those that aren&#8217;t. The first is <code>interpolate</code>. Most people may not need this, but I do a lot of blogging about JSF (though not as much I used to, I guess :).  As part of that, I have a lot of EL expressions, such as <code>#{someBean.someProperty}</code>, in my posts.  Without this option, Awestruct will try to "interpolate" the text, at which point that expression will be processed as if it were a Ruby string. Since <code>someBean</code> hasn&#8217;t been defined in the Ruby process, an error occurs and the build fails. If you don&#8217;t have EL expressions or something similar, it may be safe to leave this set to its default of true.</p>
</div>
<div class="paragraph">
<p>I think the only one left that needs discussion is <code>profiles.production.deploy</code>. In my case, I have a shared host to which I want to deploy the generated site. With this configuration, when you tell Awestruct to deploy your site, it will rsync, via ssh, to <code>myblog.com</code>, logging in as <code>user</code>, and putting the files in <code>/home/user/path/to/site</code>. The nice thing is that it will remove files from the remote site if they are removed from the local build, so you don&#8217;t have to manage that manually.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll discuss (no pun intended), <code>disqus</code> and <code>disqus_developer</code> later.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extpipeline-rb">_ext/pipeline.rb</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The next important file is <code>_ext/pipeline.rb</code>. While <code>site.yml</code> configures your site, <code>pipeline.rb</code> configures Awestruct itself. Here you enable extensions and helpers, basically turning features on and off.  As of the time of this writing, I have two Awestruct based sites, and their pipeline files look basically like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="ruby"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span style="color: #953800">require</span> <span style="color: #0a3069">'readmore'</span>
<span style="color: #953800">require</span> <span style="color: #0a3069">'erubis'</span>
<span style="color: #953800">require</span> <span style="color: #0a3069">'tilt'</span>

<span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">Pipeline</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span> <span style="color: #cf222e">do</span>
  <span style="color: #24292f;background-color: #f6f8fa">extension</span> <span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">Posts</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span><span style="color: #24292f;background-color: #f6f8fa">(</span> <span style="color: #0a3069">'/posts'</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">:posts</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
  <span style="color: #24292f;background-color: #f6f8fa">extension</span> <span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">Paginator</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span><span style="color: #24292f;background-color: #f6f8fa">(</span> <span style="color: #0a3069">:posts</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">'/index'</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">:per_page</span> <span style="color: #0550ae">=&gt;</span> <span style="color: #0550ae">10</span> <span style="color: #24292f;background-color: #f6f8fa">)</span>
  <span style="color: #24292f;background-color: #f6f8fa">extension</span> <span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">Tagger</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span><span style="color: #24292f;background-color: #f6f8fa">(</span> <span style="color: #0a3069">:posts</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">'/index'</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">'/posts/tags'</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">:per_page</span> <span style="color: #0550ae">=&gt;</span> <span style="color: #0550ae">10</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
  <span style="color: #24292f;background-color: #f6f8fa">extension</span> <span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">TagCloud</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span><span style="color: #24292f;background-color: #f6f8fa">(</span> <span style="color: #0a3069">:tagcloud</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">'/posts/tags/index.html'</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">:layout</span><span style="color: #0550ae">=&gt;</span><span style="color: #0a3069">'base'</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">:title</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">"&gt;'Tags')"</span>
  <span style="color: #24292f;background-color: #f6f8fa">extension</span> <span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">Disqus</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span>

  <span style="color: #24292f;background-color: #f6f8fa">extension</span> <span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">Indexifier</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span>
  <span style="color: #24292f;background-color: #f6f8fa">extension</span> <span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">Atomizer</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span><span style="color: #24292f;background-color: #f6f8fa">(</span> <span style="color: #0a3069">:posts</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">'/feed.atom'</span><span style="color: #24292f;background-color: #f6f8fa">,</span> <span style="color: #0a3069">:feed_title</span><span style="color: #24292f;background-color: #f6f8fa">:</span> <span style="color: #0a3069">"&gt;'Steeplesoft' )"</span>

  <span style="color: #24292f;background-color: #f6f8fa">helper</span> <span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">Partial</span>
  <span style="color: #24292f;background-color: #f6f8fa">helper</span> <span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">GoogleAnalytics</span>
  <span style="color: #24292f;background-color: #f6f8fa">helper</span> <span style="color: #953800">Awestruct</span><span style="color: #0550ae">::</span><span style="color: #953800">Extensions</span><span style="color: #0550ae">::</span><span style="color: #953800">ReadMore</span>
<span style="color: #cf222e">end</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>I don&#8217;t know Ruby (though I&#8217;ve learned some in this process), but this seems pretty straightforward to me:  <code>require</code> is like a Java <code>import</code>, and the <code>do</code> block is configuring a new <code>Pipeline</code> object. Syntax questions aside, here&#8217;s my understanding of the file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Posts</code> extension is configured. We&#8217;re telling the system to look for the posts in file under the <code>/posts</code> directory. An array of post objects is then stored in the <code>posts</code> variable.</p>
</li>
<li>
<p>The <code>Paginator</code> extension is added, using the <code>posts</code> array. It seems the paginator needs to know the location of the paginator, which is our index file, <code>/index</code>. I don&#8217;t know why it doesn&#8217;t seem to need the extension. Finally, we want to have 10 posts per page.</p>
</li>
<li>
<p>The <code>Tagger</code> extension will build data based on the <code>tags</code> information at the top of each post (which we&#8217;ll see in a minute). It creates static tag navigation files under <code>/posts/tags</code>, and it also has only 10 posts per page.</p>
</li>
<li>
<p>The <code>TagCloud</code> extension is here mainly to show you that it exists. I have not yet figured out how to make it work. Maybe someone can show me what I&#8217;m doing wrong. :P</p>
</li>
<li>
<p>Since this is a static site, we can&#8217;t use a local database for comments, so we&#8217;re adding support for Disqus to our site.</p>
</li>
<li>
<p>The <code>Indexifier</code> and <code>Atomizer</code> extensions are used to create the news feed for your site, which I still find important and helpful, even if Google disagress (R.I.P., Google Reader! :)</p>
</li>
<li>
<p>The <code>Partial</code> helper allows us to define&#8201;&#8212;&#8201;hold on to your seats&#8201;&#8212;&#8201;reusable parts of a page. We&#8217;ll see this in more detail later.</p>
</li>
<li>
<p>The <code>GoogleAnalytics</code> helper should be self-explanatory.</p>
</li>
<li>
<p><code>ReadMore</code> is an extension I wrote to duplicate the "read more" functionality of Wordpress. It&#8217;s in a file called <code>readmore.rb</code> and goes in <code>_ext</code>. It looks like this:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="ruby"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="code"><pre><span style="color: #cf222e">module</span> <span style="color: #953800">Awestruct</span>
  <span style="color: #cf222e">module</span> <span style="color: #953800">Extensions</span>
    <span style="color: #cf222e">module</span> <span style="color: #953800">ReadMore</span>
      <span style="color: #cf222e">def</span> <span style="color: #8250df">truncate</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">content</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
        <span style="color: #24292f;background-color: #f6f8fa">index</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">content</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">index</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">"&lt;!-- Read More --&gt;"</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
        <span style="color: #cf222e">if</span> <span style="color: #24292f;background-color: #f6f8fa">index</span> <span style="color: #0550ae">!=</span> <span style="color: #cf222e">nil</span>
            <span style="color: #cf222e">if</span> <span style="color: #24292f;background-color: #f6f8fa">index</span> <span style="color: #0550ae">&gt;</span> <span style="color: #0550ae">-</span><span style="color: #0550ae">1</span>
                <span style="color: #cf222e">return</span> <span style="color: #24292f;background-color: #f6f8fa">content</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0550ae">0</span><span style="color: #0550ae">..</span><span style="color: #24292f;background-color: #f6f8fa">index</span><span style="color: #0550ae">-</span><span style="color: #0550ae">1</span><span style="color: #24292f;background-color: #f6f8fa">]</span>
            <span style="color: #cf222e">end</span>
        <span style="color: #cf222e">end</span>
        <span style="color: #cf222e">return</span> <span style="color: #24292f;background-color: #f6f8fa">content</span>
      <span style="color: #cf222e">end</span>
      <span style="color: #cf222e">def</span> <span style="color: #8250df">filter</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">content</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
        <span style="color: #24292f;background-color: #f6f8fa">index</span> <span style="color: #0550ae">=</span> <span style="color: #24292f;background-color: #f6f8fa">content</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">index</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">"&lt;!-- Read More --&gt;"</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
        <span style="color: #cf222e">if</span> <span style="color: #24292f;background-color: #f6f8fa">index</span> <span style="color: #0550ae">!=</span> <span style="color: #cf222e">nil</span>
            <span style="color: #cf222e">if</span> <span style="color: #24292f;background-color: #f6f8fa">index</span> <span style="color: #0550ae">&gt;</span> <span style="color: #0550ae">-</span><span style="color: #0550ae">1</span>
                <span style="color: #24292f;background-color: #f6f8fa">content</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #24292f;background-color: #f6f8fa">index</span><span style="color: #0550ae">..</span><span style="color: #24292f;background-color: #f6f8fa">index</span><span style="color: #0550ae">+</span><span style="color: #0550ae">11</span><span style="color: #24292f;background-color: #f6f8fa">]</span><span style="color: #0550ae">=</span> <span style="color: #0a3069">""</span>
            <span style="color: #cf222e">end</span>
        <span style="color: #cf222e">end</span>
        <span style="color: #24292f;background-color: #f6f8fa">content</span>
      <span style="color: #cf222e">end</span>
    <span style="color: #cf222e">end</span>
  <span style="color: #cf222e">end</span>
<span style="color: #cf222e">end</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pages and posts should be able to put <code>&lt;!-- Read More -&#8594;</code> on a line by itself and things will work as expected: in page listing, the content stops at <code>&lt;!-- Read More -&#8594;</code>, and on full posts, <code>&lt;!-- Read More -&#8594;</code> is removed from the output. The rest of the ugliness of the file is due to the fact that I don&#8217;t know Ruby, so I was shooting in the dark. Feel free to clean it up, but, if you do, I&#8217;d love to see your better version. :)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="layouts">Layouts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the site and Awestruct configured, we now need to create the look and feel for the site.  This can, of course, be as fancy as you want. For this example, it&#8217;s going to be simple and ugly, but, hopefully, educational. :) Again, the Awestruct initialization will create a .haml file, which we want to delete. Instead, we want to create <code>_layouts/base.html.slim</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="slim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="code"><pre><span style="color: #953800">doctype</span><span style="color: #24292f;background-color: #f6f8fa"> </span>5
<span style="color: #116329">html</span>
  <span style="color: #116329">head</span>
    <span style="color: #116329">meta</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">charset</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">'utf-8'</span>
    <span style="color: #116329">title</span>:<span style="color: #24292f;background-color: #f6f8fa"> </span>"(page<span style="color: #953800">.title</span><span style="color: #24292f;background-color: #f6f8fa"> </span>?<span style="color: #24292f;background-color: #f6f8fa"> </span>[page<span style="color: #953800">.title</span>,<span style="color: #24292f;background-color: #f6f8fa"> </span>site<span style="color: #953800">.title</span>]<span style="color: #24292f;background-color: #f6f8fa"> </span>:<span style="color: #24292f;background-color: #f6f8fa"> </span>[site<span style="color: #953800">.title</span>])<span style="color: #24292f;background-color: #f6f8fa"> </span>*<span style="color: #24292f;background-color: #f6f8fa"> </span>'<span style="color: #24292f;background-color: #f6f8fa"> </span>|<span style="color: #24292f;background-color: #f6f8fa"> </span>'"
    <span style="color: #116329">link</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">rel</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">"stylesheet"</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">href</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">'/styles/style.css'</span>
    <span style="color: #116329">script</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">src</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">'/scripts/some.js'</span>
    <span style="color: #8250df">javascript:
</span>        <span style="color: #8250df">someInlineJs</span><span style="color: #24292f;background-color: #f6f8fa">();</span>
    <span style="color: #8250df">css:
</span>      <span style="color: #953800">.someInlineCss</span> <span style="color: #24292f;background-color: #f6f8fa">{</span>
      <span style="color: #24292f;background-color: #f6f8fa">}</span>
  <span style="color: #116329">body</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">class</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">"someInlineCss"</span>
    <span style="color: #116329">div</span><span style="color: #953800">.header</span>
        <span style="color: #116329">h1</span>
            <span style="color: #116329">My</span><span style="color: #24292f;background-color: #f6f8fa"> </span>Site
    <span style="color: #116329">div</span><span style="color: #953800">.content</span>
        <span style="color: #24292f;background-color: #f6f8fa">=</span> <span style="color: #24292f;background-color: #f6f8fa">content</span>
    <span style="color: #116329">div</span><span style="color: #953800">.footer</span>
        <span style="color: #116329">h3</span>
            <span style="color: #116329">I</span>'m<span style="color: #24292f;background-color: #f6f8fa"> </span>in<span style="color: #24292f;background-color: #f6f8fa"> </span>the<span style="color: #24292f;background-color: #f6f8fa"> </span>footer!
    <span style="color: #8250df">javascript:
</span>    <span style="color: #24292f;background-color: #f6f8fa">-</span> <span style="color: #cf222e">if</span> <span style="color: #24292f;background-color: #f6f8fa">site</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">google_analytics</span>
        <span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #24292f;background-color: #f6f8fa">google_analytics_async</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The slim syntax is pretty simple, but, more importantly, really clean and light. No angle brackets. Yea! Hopefully, this all pretty straightforward. For more information on the slim syntax, you can visit its <a href="http://slim-lang.com/">home page</a>. The import part here is the <code>= content</code> line. This is where the information from each page, or post, will be inserted.  How do we do that? Let&#8217;s go back to the index file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="index-html-slim">index.html.slim</h2>
<div class="sectionbody">
<div class="paragraph">
<p>My index pages look more or less like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="linenums"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre>layout: base
#content
    =partial('pagination.html.slim', :posts =&gt; page.posts)
    div style="clear: both"
    - page.posts.each do |post|
        =partial('entry.html.slim', :post =&gt; post, :listing =&gt; true)
    =partial('pagination.html.slim', :posts =&gt; page.posts)
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The text in between the <code>---</code> markers provides metadata Awestruct needs, such as title, author, tags, publish date, etc.  The <code>#content</code> line defines a <code>div</code> with an ID of <code>content</code>. The next line <code>=partial&#8230;&#8203;</code>, makes use of the <code>Partial</code> helper. In this case, we tell it to use the template <code>pagination.html.slim</code>, which is under <code>_partials</code>, and assign the variable <code>posts</code> the value of <code>page.posts</code>. We&#8217;ll look at the partial in a moment.</p>
</div>
<div class="paragraph">
<p>The next line shows how to specify an HTML tag with arbitrary attributes.</p>
</div>
<div class="paragraph">
<p>Next we have, as best as I can tell (and I&#8217;m just pulling a term from the air), a directive to Awestruct, which seems to be, more or less, straight Ruby code. Whatever the right term is, what we have is a loop over the array <code>page.posts</code>, and calls <code>partial</code> for each element, this time using <code>entry.html.slim</code>. Finally, we output the navigation partial again so we can have prev/next at the top and bottom.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="partials">Partials</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Partials allow us to define a small snippet of&#8230;&#8203;parameterized HTML that we can reuse. We&#8217;ve already seen the usages of two: pagination and entry. These files are simple slim files:</p>
</div>
<div class="listingblock">
<div class="title">pagination.html.slim</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="slim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span style="color: #116329">div</span><span style="color: #953800">.pagination</span>
    <span style="color: #116329">div</span><span style="color: #953800">.previous</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">style</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">"width:50%; float: left"</span>
        <span style="color: #24292f;background-color: #f6f8fa">-</span> <span style="color: #cf222e">if</span> <span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">posts</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">previous_page</span>
          <span style="color: #116329">a</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">href</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #953800">.posts.previous_page.url</span><span style="color: #24292f;background-color: #f6f8fa"> </span>Previous
        <span style="color: #24292f;background-color: #f6f8fa">-</span> <span style="color: #cf222e">if</span> <span style="color: #0550ae">!</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">posts</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">previous_page</span>
          <span style="color: #116329">p</span><span style="color: #24292f;background-color: #f6f8fa"> </span>Previous
    <span style="color: #116329">div</span><span style="color: #953800">.next</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">style</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">"width:50%; float: right; text-align: right"</span>
        <span style="color: #24292f;background-color: #f6f8fa">-</span> <span style="color: #cf222e">if</span> <span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">posts</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">next_page</span>
          <span style="color: #116329">a</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">href</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #953800">.posts.next_page.url</span><span style="color: #24292f;background-color: #f6f8fa"> </span>Next
        <span style="color: #24292f;background-color: #f6f8fa">-</span> <span style="color: #cf222e">if</span> <span style="color: #0550ae">!</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">posts</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">next_page</span>
          <span style="color: #116329">p</span><span style="color: #24292f;background-color: #f6f8fa"> </span>Next
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this partial, we use the variable <code>page.posts</code>, which we set in the call to <code>partial</code> above.</p>
</div>
<div class="listingblock">
<div class="title">entry.html.slim</div>
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="slim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="code"><pre><span style="color: #116329">article</span><span style="color: #953800">.post</span>
  <span style="color: #116329">header</span><span style="color: #953800">.entry-header</span>
    <span style="color: #116329">h1</span><span style="color: #953800">.title</span>
      <span style="color: #116329">a</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">href</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #953800">.post.url</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">post</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">title</span>
    <span style="color: #116329">h4</span>
      <span style="color: #116329">time</span><span style="color: #953800">.pubdate</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">datetime</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #953800">.post.date.strftime</span>('%FT%T%:z')<span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">post</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">date</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">strftime</span> <span style="color: #0a3069">"%A, %B </span><span style="color: #24292f">#{</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">post</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">date</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">day</span><span style="color: #24292f">}</span><span style="color: #0a3069">, %Y"</span>
  <span style="color: #953800">.entry-content</span>
    <span style="color: #24292f;background-color: #f6f8fa">=</span> <span style="color: #24292f;background-color: #f6f8fa">truncate</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">post</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">content</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
  <span style="color: #116329">footer</span><span style="color: #953800">.entry-footer</span>
    <span style="color: #24292f;background-color: #f6f8fa">-</span> <span style="color: #cf222e">if</span> <span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">post</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">tags</span>
      <span style="color: #953800">.tags</span>
        <span style="color: #116329">span</span><span style="color: #953800">.title</span>
          <span style="color: #24292f;background-color: #f6f8fa">|</span> tags:
        <span style="color: #24292f;background-color: #f6f8fa">-</span> <span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">post</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">tags</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">each</span> <span style="color: #cf222e">do</span> <span style="color: #0550ae">|</span><span style="color: #24292f;background-color: #f6f8fa">tag</span><span style="color: #0550ae">|</span>
          <span style="color: #116329">a</span><span style="color: #24292f;background-color: #f6f8fa"> </span><span style="color: #116329">href</span><span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">"/posts/tags/#{tag}"</span>
            <span style="color: #24292f;background-color: #f6f8fa">-</span> <span style="color: #cf222e">if</span> <span style="color: #24292f;background-color: #f6f8fa">tag</span> <span style="color: #0550ae">!=</span> <span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">post</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">tags</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">last</span>
              <span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">"</span><span style="color: #24292f">#{</span><span style="color: #24292f;background-color: #f6f8fa">tag</span><span style="color: #24292f">}</span><span style="color: #0a3069">, "</span>
            <span style="color: #24292f;background-color: #f6f8fa">-</span> <span style="color: #cf222e">else</span>
              <span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #0a3069">"</span><span style="color: #24292f">#{</span><span style="color: #24292f;background-color: #f6f8fa">tag</span><span style="color: #24292f">}</span><span style="color: #0a3069"> "</span>
  <span style="color: #24292f;background-color: #f6f8fa">-</span> <span style="color: #cf222e">if</span> <span style="color: #24292f;background-color: #f6f8fa">site</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">disqus</span>
    <span style="color: #8250df">#comments</span>
      <span style="color: #24292f;background-color: #f6f8fa">=</span><span style="color: #24292f;background-color: #f6f8fa">page</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">post</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">disqus_comments</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This partial operates on a single element in our <code>posts</code> array, which we&#8217;ve assigned to <code>post</code>. Not also that, using an <code>=</code>, we can insert Ruby snippets to perform simple transformations. Here, I&#8217;m breaking the post date apart to generate a better looking date block.</p>
</div>
<div class="paragraph">
<p>At the very end, we see Disqus come back up.  When the Disqus plugin is properly configured as we did above, all the needs to be done to make use of on the page is to put <code>=page.post.disqus_comments</code> somewhere on your page. At build time, Awestruct does all the work required to generate the HTML and JS to do the actual integration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="site-content">Site Content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We can now look at the important part of this exercise, the site content itself. Personally, I&#8217;m a pretty big fan of Asciidoc, so we&#8217;re going to write our pages and post using that. Before we look at blog entries, let&#8217;s take a quick look at the simple page use case.</p>
</div>
<div class="paragraph">
<p>For a "normal" page, such as an About page, for which you simply need to create a page called <code>about.adoc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="asciidoc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre>title: About
author: Jason Lee
h1
    About
This page is all about me!
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the site is built, this page can be accessed via <code><a href="http://localhost:1234/about" class="bare">http://localhost:1234/about</a></code>. Each .adoc file is compiled to a directory with the same name as the file, which contains the file <code>index.html</code>.</p>
</div>
<div class="paragraph">
<p>Blog posts are only slight more complicated, as it seems there are conventions that need to be followed. Based on our configuration above, all blog posts must be put in the <code>posts/</code> directory, and it seems, must follow the naming scheme <code>yyyy-mm-dd-blog-post-title.adoc</code>. Other than that, they look pretty much like any other page, with a couple more metadata entries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="asciidoc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre>title: Blog Post Title
author: Jason Lee
date: 2013-04-19
tags: [tag1, tag2]
Blog content
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you know Asciidoc, you should be ready to author your post. It&#8217;s important to note that the value of <code>tags</code> must be an array, or the page will fail to compile.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing">Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we&#8217;re ready to push this site live, we need to test it. Awestruct comes with a simple server that should be sufficient for most cases. While starting is very simple, I have a small shell script I use, as I like to force a site clean up before I start the server, and I need to change the port on which the server listens:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span style="color: #6e7781">#!/bin/bash</span>

<span style="color: #953800">rm</span> <span style="color: #116329">-rf</span> _tmp _site
awestruct <span style="color: #116329">--auto</span> <span style="color: #116329">--server</span> <span style="color: #116329">--port</span> 1234 <span style="color: #116329">--profile</span> development
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The site is now available at <code><a href="http://localhost:1234" class="bare">http://localhost:1234</a></code>. For simple changes, such as page content changes, Awestruct will detect changes and recompile the page, making it more or less immediately available. For other changes, such as configuration changes, you will have to restart the server.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deployment">Deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once we have our site set up and looking the way want it to, we&#8217;re ready to deploy. Again, Awestruct makes this very simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #24292f;background-color: #f6f8fa"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span style="color: #0550ae">$ </span>awestruct <span style="color: #116329">-P</span> production <span style="color: #116329">-g</span> <span style="color: #116329">--force</span> <span style="color: #116329">--deploy</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we&#8217;re telling Awestruct to use the <code>production</code> profile, to generate the site (forcing it to do so even if it thinks it doesn&#8217;t need to), and then to deploy the site using the configuration in <code>_config/site.yml</code>. In our case here, it will rsync the generated site with the remote host. Once that finishes, your very lightweight and, therefore, very fast web site is ready for public consumption.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="final-notes">Final Notes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As I&#8217;ve kind of hinted at, I&#8217;m still pretty new to Awestruct, so there&#8217;s a really good chance I have some things wrong: terms, techniques, other assumptions. What I&#8217;ve put together here, though, should, I hope, spare you some of the pain I went through in trying to come up to speed with tool.  For things I&#8217;ve not made clear&#8201;&#8212;&#8201;or covered&#8201;&#8212;&#8201;or got completely wrong, the folks in #awestruct on Freenode are very helpful. I&#8217;ve gotten great support from <a href="https://twitter.com/mojavelinux">Dan Allen</a>, <a href="https://twitter.com/aslakknutsen">Aslak Knutsen</a>, <a href="https://twitter.com/lightguardjp">Jason Porter</a>, and <a href="https://twitter.com/bobmcwhirter">Bob McWhirter</a> and others there. I try to hang out there as well, but as of right now, everything I know is in this document. :)</p>
</div>
<div class="paragraph">
<p>Give it a go, then, and let me know if you run into problems with my instructions, and I&#8217;ll do my best to clarify and correct.  Good luck! :)</p>
</div>
</div>
</div>
    </div>
    <footer>
        <div class="grid">
            <div class="col tags">
                
                <span class="title">tags: </span>
                
                <a href="/tag/awestruct/">Awestruct</a>
                <!--                <a href="https://jasondl.ee/tags/Awestruct.html">Awestruct</a>-->
                
                
            </div>
            <div class="col"><span class="share-page" style="">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://jasondl.ee/2013/Setting-Up-an-Awestruct-based-Blog&title=Setting Up an Awestruct-based Blog" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <i class="fa fa-linkedin-square"></i>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=Setting Up an Awestruct-based Blog&url=https://jasondl.ee/2013/Setting-Up-an-Awestruct-based-Blog&via=jasondlee&related=jasondlee" rel="nofollow" target="_blank" title="Share on Twitter">
      <i class="fa fa-twitter-square"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://jasondl.ee/2013/Setting-Up-an-Awestruct-based-Blog" rel="nofollow" target="_blank" title="Share on Facebook">
      <i class="fa fa-facebook-square"></i>
  </a>
  <a class="share-reddit" href="https://www.reddit.com/submit?url=https://jasondl.ee/2013/Setting-Up-an-Awestruct-based-Blog" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
      <i class="fa fa-reddit-square"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Setting Up an Awestruct-based Blog&amp;body=Setting Up an Awestruct-based Blog https://jasondl.ee/2013/Setting-Up-an-Awestruct-based-Blog" title="Share via Email" >
      <i class="fa fa-envelope"></i>
  </a>
</span>
</div>
        </div>
    </footer>
</article>

        </div>
    </div>
    <div class="col-3 widget">
        <div>
            <h3>Search</h3>
            <!-- HTML elements for search -->
            <input type="text" id="search-input" placeholder="Search blog posts.." style="width: 98%"/>
            <ul id="results-container"></ul>

            <script>
                var sjs = SimpleJekyllSearch({
                    searchInput: document.getElementById('search-input'),
                    resultsContainer: document.getElementById('results-container'),
                    json: '/search.json',
                    limit: 50
                })
            </script>
        </div>
        <div>
            <h3>Quotes</h3>
            <p id="quote">Sample quote</p>
            <p id="source">Quote source</p>
        </div>
        <div>
            <h3>About</h3>
            <p><img src="/images/profile-pic.jpg" style="float:right; object-fit: scale-down; padding-bottom: 1em;"/>My name is Jason Lee. I am a software developer living in the middle of Oklahoma. Ive been a professional developer since 1997,
using a variety of languages, including Java, Javascript, PHP, Python, Delphi, and even a bit of C#. I currently work for Red Hat
on the WildFly/EAP team, where, among other things, I maintain integrations for some MicroProfile specs, OpenTelemetry, Micrometer,
Jakarta Faces, and Bean Validation. (Full resume <a href="resume">here</a>.
LinkedIn <a href="https://www.linkedin.com/in/jasondlee">profile</a>)</p>

<p>I am the president of the Oklahoma City JUG, and an occasional speaker at the JUG and a variety of technical conferences.</p>

<p>On the personal side, Im active in my church, and enjoy bass guitar, running, fishing, and a variety of martial arts. Im also
married to a beautiful woman, and have two boys, who, thankfully, look like their mother.</p>

        </div>
        <div>
            <h3>My Links</h3>
            <ul>
                
                <li>
                    <a href="/presentations" title="Presentations">
                        Presentations
                    </a>
                </li>
                
                <li>
                    <a href="/assets/resume.pdf" title="Resume/CV">
                        Resume/CV
                    </a>
                </li>
                
                <li>
                    <a href="https://linkedin.com/in/jasondlee" title="LinkedIn">
                        LinkedIn
                    </a>
                </li>
                
                <li>
                    <a href="https://twitter.com/jasondlee" title="Twitter">
                        Twitter
                    </a>
                </li>
                
                <li>
                    <a href="https://mastodon.cloud/@jasondlee" title="Mastodon">
                        Mastodon
                    </a>
                </li>
                
                <li>
                    <a href="/tag" title="Tags">
                        Tags
                    </a>
                </li>
                
            </ul>

        </div>
        <div>
            <h3>Publications</h3>
            <ul>
                <li>
                    <div class="grid">
                        <div class="col-8" style="text-weight: bold; font-size: large">
                            <div>Java 9 Programming Blueprints:</div>
                            <div>
                                <a title="My Java 9 book at Amazon" href="https://amzn.to/2FD2XAo" style="padding-left: 10px">Amazon</a>
                            </div>
                            <div>
                                <a title="My Java 9 book at Packt"
                                   href="https://www.packtpub.com/application-development/java-9-programming-blueprints"
                                   style="padding-left: 10px">Packt</a>
                            </div>
                        </div>
                            <div class="col-4">
                                <a href="https://amzn.to/2FD2XAo"><img src="/images/2017/j9pb.png" width="100"/></a>
                            </div>
                    </div>
                </li>
                
                <li>
                    <a href="https://jaxenter.com/tips-for-writing-pluggable-java-ee-applications-105281.html" title="This article discusses ways to use Java EE specs to implement a simple, yet powerful plugin system with a minimum of thrid party libraries.">
                        Tips for Writing Pluggable Java EE Applications
                    </a>
                </li>
                
                <li>
                    <a href="http://www.oracle.com/technetwork/articles/javaee/jsf-templating-137822.html" title="An article Ken Paulsen and I wrote detailing easy JSF component creation">
                        JSFTemplating and Woodstock: Component Authoring Made Easy
                    </a>
                </li>
                
                <li>
                    <a href="http://jsfcentral.com/articles/lee-03-09.html" title="Jason Lee in depth: Mojarra and Scales">
                        Jason Lee in depth: Mojarra and Scales
                    </a>
                </li>
                
                <li>
                    <a href="https://web.archive.org/web/20090301060746/http://www.theserverside.com/news/thread.tss?thread_id=49343" title="My JavaOne 2008 Wrap Up">
                        Jason Lee: Postmortem for JavaOne 2008
                    </a>
                </li>
                
                <li>
                    <a href="https://web.archive.org/web/20130621192312/https://blogs.oracle.com/stories/entry/international_environmental" title="The GlassFish Adoption Story from my time at IEC">
                        International Environmental: A Cooling Company Which Prefers Hot Software
                    </a>
                </li>
                
                <li>
                    <a href="http://www.jsfcentral.com/articles/trenches_7.html" title="This details the project that spawned a couple of the Mojarra Scales components">
                        IEC donates custom JSF component to Mojarra Scales
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
<div class="footer">
    <div>
        <p>&#169; Copyright Jason Lee, 2005-2023. All rights reserved.</p>
    </div>
</div>
<!--
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-1091049-6', 'auto');
    ga('send', 'pageview');
</script>
-->
<script src="/assets/js/quotes.js" type="text/javascript"></script>
<script src="/assets/js/local.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
<script type="text/javascript" src="/assets/js/copy.js"></script>
</body>
</html>
