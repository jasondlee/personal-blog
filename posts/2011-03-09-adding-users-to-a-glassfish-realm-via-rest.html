---
title: 'Adding Users to a GlassFish Realm via REST'
author: 'Jason Lee'
layout: blog-post
date: 2011-3-9
tags: [ GlassFish, REST ]
---
<p>A user on the GlassFish forums recently asked how to create users in bulk.  The <code>asadmin</code> command <code>create-file-user</code> doesn't support passing the password as a parameter, which makes scripting difficult.  The REST interface, though, can help there, and it's really pretty simple.<!--more-->
</p>
<p>The REST endpoint of interest is  <a href=" http://localhost:4848/management/domain/configs/config/server-config/security-service/auth-realm/file/create-user">http://localhost:4848/management/domain/configs/config/server-config/security-service/auth-realm/file/create-user</a>, and here's a sample bash shell script to exercise it:
</p>
<pre><code>#!/bin/bash
for USER in user1 user2 user3 user4 user5 user6 user7 user8 user9 user10 ; do
    curl -X POST -H 'Accept: application/json' \
        -d id=$USER -d AS_ADMIN_USERPASSWORD=$USER http://localhost:4848/management/domain/configs/config/server-config/security-service/auth-realm/file/create-user
done
</code></pre>
<p>Want to see what users exist in the realm?
</p>
<pre><code>$ curl -H 'Accept: application/json' http://localhost:4848/management/domain/configs/config/server-config/security-service/auth-realm/file/list-users
{
    "command": "list-file-users AdminCommand",
    "exit_code": "SUCCESS",
    "extraProperties": {"users": [
        {
            "name": "user10",
            "groups": []
        },
        {
            "name": "user9",
            "groups": []
        },
// ...
    ]},
    "children": [
        {
            "message": "user10",
            "properties": {}
        },
        {
            "message": "user9",
            "properties": {}
        },
// ...
    ]
}</code></pre>
<h2>Minor update</h2>
<p>I forgot that the poster asked about deleting users.  Here's how you do that:
</p>
<pre><code>$ curl -H 'Accept: application/json' -X DELETE -d id=user1 $mgmt/configs/config/server-config/security-service/auth-realm/file/delete-user
{
    "command": "delete-file-user AdminCommand",
    "exit_code": "SUCCESS"
}</code></pre>
<p>It's important to note that only <code>FileRealm</code>-based realms support user management in this manner.  For other realm types, like <code>LdapRealm</code> and <code>JdbcRealm</code>, for example, the system administrator will need to use tools that are appropriate for the type of realm in question.
</p>
<p>If you have any questions, leave a message. : )</p>
