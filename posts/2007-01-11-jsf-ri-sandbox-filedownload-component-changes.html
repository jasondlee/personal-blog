---
title: 'JSF RI Sandbox FileDownload Component Changes'
author: 'Jason Lee'
layout: blog-post
date: 2007-1-11
tags: [ Java, JavaServer Faces ]
---
<p>Today I checked in a couple of changes to the RI Sandbox file download component that will make the component more flexible, and, therefore, more usable.<!--more-->
</p>
<p>Before these changes, the only way the component could be used was with one of two "methods:"  "inline" (e.g., a PDF embedded in the page), or "download" (which was a link with a text anchor).  While this worked, it was pretty limiting.  What if the page author wants the link to be a picture, or if he wants the file download to start from on onChange even handler?  Before today, that wasn't possible.  Today, though, I committed support for child components, as well as support for creating an EL variable that can be used by any child components as they please.
</p>
<p>With the first change, something like is now possible:
</p>
<p>[source lang="xml"]<risb:download method="download" mimeType="application/pdf" 
</p>
<p>    fileName="HelloWorld.pdf"
</p>
<p>    data="#{testBean.pdf}">
</p>
    <h___graphicImage alt="Download" url="/download.jpg"/>
</risb:download>
<p>[/source]
</p>
<p>which will render an anchor, using the the <code>download.jpg</code> image as its content, that will deliver the HelloWorld PDF to the client when clicked.  (In theory, anything can be used inside <code><risb:download /></code>, though I've only tested with text and images.)
</p>
<p>But what if you want a dynamically generated image to be displayed?  With the second change, this is now possible:
</p>
<p>[source lang="xml"]<risb:download mimeType="image/jpg" fileName="image.jpg" 
</p>
<p>    data="#{testBean.image}">
</p>
    <h___graphicImage url="#{downloadUrl}" width="250px" />
</risb:download>
<p>[/source]
</p>
<p>This simple example will render an image on the page, pulling the contents of the image from <code>TestBean.getImage</code>, and should the user try to save the image, the filename defaults to "image.jpg."  
</p>
<p>If you don't like the variable name <code>downloadUrl</code> or if it would clobber one already set, you can specify the name of the variable with the <code>urlVar</code> attribute:
</p>
<p>[source lang="xml"]<risb:download mimeType="image/jpg" fileName="image.jpg" 
</p>
<p>    urlVar="foo" data="#{testBean.image}">
</p>
    <h___graphicImage url="#{foo}" width="250px" />
</risb:download>
<p>[/source]
</p>
<p>Fancy.
</p>
<p>At IEC, we're pretty excited about these changes.  We're using both the download and multi-file upload components in a couple of different high profile projects, which means that they're stable enough for production, and they also get a good deal of real world scrutiny, resulting in changes like these above.
</p>
<p>These changes can be picked up from the RI CVS HEAD branch.
</p>
<p>Thoughts?  Complaints?  Suggestions?  </p>
